<?xml version="1.0" encoding="utf-8"?>
<DataSchemaModel FileFormatVersion="1.2" SchemaVersion="3.3" DspName="Microsoft.Data.Tools.Schema.Sql.SqlAzureV12DatabaseSchemaProvider" CollationLcid="1033" CollationCaseSensitive="False" xmlns="http://schemas.microsoft.com/sqlserver/dac/Serialization/2012/02">
	<Header>
		<CustomData Category="AnsiNulls">
			<Metadata Name="AnsiNulls" Value="True" />
		</CustomData>
		<CustomData Category="QuotedIdentifier">
			<Metadata Name="QuotedIdentifier" Value="True" />
		</CustomData>
		<CustomData Category="CompatibilityMode">
			<Metadata Name="CompatibilityMode" Value="150" />
		</CustomData>
		<CustomData Category="Reference" Type="Assembly">
			<Metadata Name="LogicalName" Value="ControlDB.dll" />
			<Metadata Name="FileName" Value="C:\USERS\RORYM\SOURCE\REPOS\BENNYAUSTIN\ELT-FRAMEWORK\ELT-FRAMEWORK\CONTROLDB\OBJ\RELEASE\CONTROLDB.DLL" />
			<Metadata Name="AssemblyName" Value="ControlDB" />
			<Metadata Name="PermissionSet" Value="SAFE" />
			<Metadata Name="Owner" Value="" />
			<Metadata Name="GenerateSqlClrDdl" Value="True" />
			<Metadata Name="IsVisible" Value="True" />
			<Metadata Name="IsModelAware" Value="True" />
			<Metadata Name="SkipCreationIfEmpty" Value="True" />
			<Metadata Name="AssemblySymbolsName" Value="C:\Users\rorym\Source\Repos\bennyaustin\elt-framework\elt-framework\ControlDB\obj\Release\ControlDB.pdb" />
		</CustomData>
		<CustomData Category="SqlCmdVariables" Type="SqlCmdVariable" />
	</Header>
	<Model>
		<Element Type="SqlDatabaseOptions">
			<Property Name="Collation" Value="SQL_Latin1_General_CP1_CI_AS" />
			<Property Name="IsAnsiNullDefaultOn" Value="True" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Property Name="IsAnsiWarningsOn" Value="True" />
			<Property Name="IsArithAbortOn" Value="True" />
			<Property Name="IsConcatNullYieldsNullOn" Value="True" />
			<Property Name="IsTornPageProtectionOn" Value="False" />
			<Property Name="IsFullTextEnabled" Value="True" />
			<Property Name="PageVerifyMode" Value="3" />
			<Property Name="DefaultLanguage" Value="" />
			<Property Name="DefaultFullTextLanguage" Value="" />
			<Property Name="QueryStoreDesiredState" Value="0" />
			<Property Name="QueryStoreCaptureMode" Value="1" />
			<Property Name="QueryStoreStaleQueryThreshold" Value="367" />
			<Property Name="MaxDop" Value="0" />
		</Element>
		<Element Type="SqlSchema" Name="[ELT]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_IngestDefinition_DataMapping]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[ISJSON([DataMapping]) = 1]]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DataMapping]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_IngestDefinition_MaxIntervalMinutes]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[MaxIntervalMinutes] IS NULL OR  [MaxIntervalMinutes] > 0]]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[MaxIntervalMinutes]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_IngestDefinition_MaxIntervalNumber]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[MaxIntervalNumber] IS NULL OR  [MaxIntervalNumber] > 0]]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[MaxIntervalNumber]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_IngestDefinition_SourceStructure]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[ISJSON([SourceStructure]) = 1]]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceStructure]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_IngestInstance_IngestStatus]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[IngestStatus]='ReRunFailure' OR [IngestStatus]='ReRunSuccess' OR [IngestStatus]='Running' OR [IngestStatus]='Failure' OR [IngestStatus]='Success']]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[IngestInstance].[IngestStatus]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestInstance]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L1TransformDefinition_CustomParameters]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[ISJSON([CustomParameters]) = 1]]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[CustomParameters]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L1TransformDefinition_OutputDWTableWriteMode]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[OutputDWTableWriteMode]='append' OR [OutputDWTableWriteMode]='overwrite' OR [OutputDWTableWriteMode]='error' OR [OutputDWTableWriteMode]='errorifexists' OR [OutputDWTableWriteMode]='ignore']]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[OutputDWTableWriteMode]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L1TransformDefinition_OutputL1CuratedFileWriteMode]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[OutputL1CuratedFileWriteMode] ='append' OR [OutputL1CuratedFileWriteMode] ='overwrite' OR [OutputL1CuratedFileWriteMode] ='ignore'  OR [OutputL1CuratedFileWriteMode] = 'error' OR [OutputL1CuratedFileWriteMode]='errorifexists']]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[OutputL1CuratedFileWriteMode]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L1TransformInstance_L1TransformStatus]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[L1TransformStatus] ='ReRunFailure' OR [L1TransformStatus] ='ReRunSuccess' OR [L1TransformStatus] ='Running' OR [L1TransformStatus] ='DWUpload' OR [L1TransformStatus]='Failure' OR [L1TransformStatus]='Success']]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformStatus]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformInstance]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L1TransformInstance_OutputDWTableWriteMode]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[OutputDWTableWriteMode]='append' OR [OutputDWTableWriteMode]='overwrite' OR [OutputDWTableWriteMode]='error' OR [OutputDWTableWriteMode]='errorifexists' OR [OutputDWTableWriteMode]='ignore']]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputDWTableWriteMode]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformInstance]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L1TransformInstance_OutputL1CuratedFileWriteMode]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[OutputL1CuratedFileWriteMode] ='append' OR [OutputL1CuratedFileWriteMode] ='overwrite' OR [OutputL1CuratedFileWriteMode] ='ignore'  OR [OutputL1CuratedFileWriteMode] = 'error' OR [OutputL1CuratedFileWriteMode]='errorifexists']]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputL1CuratedFileWriteMode]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformInstance]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L2TransformDefinition_CustomParameters]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[ISJSON([CustomParameters]) = 1]]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[CustomParameters]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L2TransformDefinition_InputType]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[InputType] ='Raw' OR [InputType] ='Curated' OR [InputType] ='Datawarehouse']]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[InputType]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L2TransformDefinition_MaxIntervalMinutes]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[MaxIntervalMinutes] IS NULL OR  [MaxIntervalMinutes] > 0]]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[MaxIntervalMinutes]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L2TransformDefinition_MaxIntervalNumber]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[MaxIntervalNumber] IS NULL OR  [MaxIntervalNumber] > 0]]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[MaxIntervalNumber]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L2TransformDefinition_OutputDWTableWriteMode]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[OutputDWTableWriteMode]='append' OR [OutputDWTableWriteMode]='overwrite' OR [OutputDWTableWriteMode]='ignore' OR [OutputDWTableWriteMode]='error' OR [OutputDWTableWriteMode]='errorifexists']]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[OutputDWTableWriteMode]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L2TransformDefinition_OutputL2CuratedFileWriteMode]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[OutputL2CuratedFileWriteMode]='append' OR [OutputL2CuratedFileWriteMode]='overwrite' OR [OutputL2CuratedFileWriteMode]='ignore' OR [OutputL2CuratedFileWriteMode]='error' OR [OutputL2CuratedFileWriteMode]='errorifexists']]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[OutputL2CuratedFileWriteMode]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L2TransformInstance_L2TransformStatus]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[L2TransformStatus] ='ReRunFailure' OR [L2TransformStatus] ='ReRunSuccess' OR [L2TransformStatus] ='Running' OR [L2TransformStatus] ='DWUpload' OR [L2TransformStatus]='Failure' OR [L2TransformStatus]='Success']]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformStatus]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformInstance]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L2TransformInstance_OutputDWTableWriteMode]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[OutputDWTableWriteMode]='append' OR [OutputDWTableWriteMode]= 'overwrite' OR [OutputDWTableWriteMode]= 'ignore' OR [OutputDWTableWriteMode]= 'error' OR [OutputDWTableWriteMode]= 'errorifexists']]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputDWTableWriteMode]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformInstance]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlCheckConstraint" Name="[ELT].[CC_L2TransformInstance_OutputL2CuratedFileWriteMode]">
			<Property Name="CheckExpressionScript">
				<Value><![CDATA[[OutputL2CuratedFileWriteMode]='append' OR [OutputL2CuratedFileWriteMode]= 'overwrite' OR [OutputL2CuratedFileWriteMode]= 'ignore' OR [OutputL2CuratedFileWriteMode]= 'error' OR [OutputL2CuratedFileWriteMode]= 'errorifexists']]></Value>
			</Property>
			<Relationship Name="CheckExpressionDependencies">
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFileWriteMode]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformInstance]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[ELT].[ColumnMapping]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[ColumnMapping].[MappingID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[ColumnMapping].[IngestID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[ColumnMapping].[L1TransformID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[ColumnMapping].[L2TransformID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[ColumnMapping].[SourceName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="150" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[ColumnMapping].[TargetName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="150" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[ColumnMapping].[Description]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="250" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[ColumnMapping].[TargetOrdinalPosition]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[ColumnMapping].[ActiveFlag]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[ColumnMapping].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[ColumnMapping].[CreatedTimestamp]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[ColumnMapping].[ModifiedBy]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[ColumnMapping].[ModifiedTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_Attribute_CreatedBy]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(suser_sname())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[ColumnMapping]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[ColumnMapping].[CreatedBy]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_Attribute_CreatedTimestamp]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(CONVERT([datetime],(CONVERT([datetimeoffset],getdate()) AT TIME ZONE 'AUS Eastern Standard Time')))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[ColumnMapping]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[ColumnMapping].[CreatedTimestamp]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_Attribute_ModifiedBy]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(suser_sname())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[ColumnMapping]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[ColumnMapping].[ModifiedBy]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_Attribute_ModifiedTimestamp]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(CONVERT([datetime],(CONVERT([datetimeoffset],getdate()) AT TIME ZONE 'AUS Eastern Standard Time')))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[ColumnMapping]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[ColumnMapping].[ModifiedTimestamp]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_IngestDefinition_CreatedBy]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[suser_sname()]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[CreatedBy]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_IngestDefinition_CreatedTimestamp]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[CreatedTimestamp]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_IngestDefinition_DelayL1TransformationFlag]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DelayL1TransformationFlag]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_IngestDefinition_DelayL2TransformationFlag]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[1]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DelayL2TransformationFlag]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_IngestDefinition_MaxRetries]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[3]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[MaxRetries]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_IngestDefinition_ModifiedBy]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[suser_sname()]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[ModifiedBy]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_IngestDefinition_ModifiedTimestamp]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[ModifiedTimestamp]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_IngestDefinition_RunSequence]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[100]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[RunSequence]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_L1TransformDefinition_CreatedBy]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[suser_sname()]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[CreatedBy]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_L1TransformDefinition_CreatedTimestamp]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[CreatedTimestamp]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_L1TransformDefinition_MaxRetries]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[3]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[MaxRetries]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_L1TransformDefinition_ModifiedBy]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[suser_sname()]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[ModifiedBy]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_L1TransformDefinition_ModifiedTimestamp]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[ModifiedTimestamp]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_L2TransformDefinition_CreatedBy]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[suser_sname()]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[CreatedBy]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_L2TransformDefinition_CreatedTimestamp]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[CreatedTimestamp]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_L2TransformDefinition_MaxRetries]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[3]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[MaxRetries]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_L2TransformDefinition_ModifiedBy]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[suser_sname()]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[ModifiedBy]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_L2TransformDefinition_ModifiedTimestamp]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ExpressionDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[ModifiedTimestamp]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[ELT].[DC_L2TransformDefinition_RunSequence]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[100]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[RunSequence]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[ELT].[FK_Attribute_IngestID]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[ELT].[ColumnMapping].[IngestID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[ColumnMapping]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[ELT].[FK_Attribute_L1TransformID]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[ELT].[ColumnMapping].[L1TransformID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[ColumnMapping]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[L1TransformID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[ELT].[FK_Attribute_L2TransformID]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[ELT].[ColumnMapping].[L2TransformID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[ColumnMapping]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[L2TransformID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[ELT].[FK_IngestInstance_IngestID]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[ELT].[IngestInstance].[IngestID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestInstance]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[ELT].[FK_L1TransformDefinition_IngestID]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[IngestID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[ELT].[FK_L1TransformInstance_IngestID]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[IngestID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformInstance]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[ELT].[FK_L1TransformInstance_L1TransformID]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformInstance]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[L1TransformID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[ELT].[FK_L2TransformDefinition_IngestID]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[IngestID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[ELT].[FK_L2TransformInstance_IngestID]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[IngestID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformInstance]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[ELT].[FK_L2TransformInstance_L1TransformID]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L1TransformID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformInstance]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[L1TransformID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlForeignKeyConstraint" Name="[ELT].[FK_L2TransformInstance_L2TransformID]">
			<Relationship Name="Columns">
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformID]" />
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformInstance]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignColumns">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[L2TransformID]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForeignTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[GetIngestDefinition]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	
		DECLARE @localdate as datetime	= CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time');

with 
	cte
as

(	--Normal Run
			SELECT 
				 [IngestID]
				,[SourceSystemName]
				,[StreamName]
				,[Backend]
				,[EntityName]
				,[DeltaName]
				
				--Delta Dates
				,[LastDeltaDate]
				,[DataFromTimestamp] = 
								CASE 
									WHEN ([EntityName] IS NOT NULL AND [LastDeltaDate] IS NOT NULL) THEN [LastDeltaDate]
									ELSE CAST('1900-01-01' AS DateTime)
								END
				,[DataToTimestamp] = 
							CASE 
								WHEN ([EntityName] IS NOT NULL AND [LastDeltaDate] IS NOT NULL AND [MaxIntervalMinutes] IS NOT NULL AND datediff_big(minute,[LastDeltaDate],@localdate) > [MaxIntervalMinutes]) THEN DateAdd(minute,[MaxIntervalMinutes],[LastDeltaDate])
								WHEN ([EntityName] IS NOT NULL AND [LastDeltaDate] IS NOT NULL AND [MaxIntervalMinutes] IS NOT NULL AND datediff_big(minute,[LastDeltaDate],@localdate) <= [MaxIntervalMinutes]) THEN CONVERT(VARCHAR(30),@localdate,120)
								ELSE CONVERT(VARCHAR(30),@localdate,120) 
							END

				--Delta Numbers
				,[LastDeltaNumber]
				,[DataFromNumber] = 
							CASE 
								WHEN ([EntityName] IS NOT NULL AND [LastDeltaNumber] IS NOT NULL) THEN [LastDeltaNumber]
					  END
				,[DataToNumber] = 
								CASE 
									WHEN ([EntityName] IS NOT NULL AND [LastDeltaNumber] IS NOT NULL) THEN ([LastDeltaNumber] + [MaxIntervalNumber])
					   END

				,[DataFormat]
				,[SourceStructure]
				,[MaxIntervalMinutes]
				,[MaxIntervalNumber]
				,[DataMapping]
				,[RunSequence]
				,[ActiveFlag]
				,[L1TransformationReqdFlag]
				,[L2TransformationReqdFlag]
				,[DelayL1TransformationFlag]
				,[DelayL2TransformationFlag]
				,[DestinationRawFileSystem]
		
			--Derived Fields
				,[DestinationRawFolder] = 
					REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE([DestinationRawFolder] COLLATE SQL_Latin1_General_CP1_CS_AS
					,'YYYY',CAST(Year(COALESCE([LastDeltaDate],@localdate)) as varchar(4)))
					,'MM',Right('0'+ CAST(Month(COALESCE([LastDeltaDate],@localdate)) AS varchar(2)),2))
					,'DD',Right('0'+Cast(Day(COALESCE([LastDeltaDate],@localdate)) as varchar(2)),2))
					,'HH',Right('0'+ CAST(DatePart(hh,COALESCE([LastDeltaDate],@localdate)) as varchar(2)),2))
					,'MI',Right('0'+ CAST(DatePart(mi,COALESCE([LastDeltaDate],@localdate)) as varchar(2)),2))
					,'SS',Right('0'+ CAST(DatePart(ss,COALESCE([LastDeltaDate],@localdate)) as varchar(2)),2))
			
				,[DestinationRawFile] = 
					REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE([DestinationRawFile] COLLATE SQL_Latin1_General_CP1_CS_AS
					,'YYYY',CAST(Year(COALESCE([LastDeltaDate],@localdate)) AS varchar(4)))
					,'MM',Right('0'+ CAST(Month(COALESCE([LastDeltaDate],@localdate)) AS varchar(2)),2))
					,'DD',Right('0'+Cast(Day(COALESCE([LastDeltaDate],@localdate)) as varchar(2)),2))
					,'HH',Right('0'+ CAST(DatePart(hh,COALESCE([LastDeltaDate],@localdate)) AS varchar(2)),2))
					,'MI',Right('0'+ CAST(DatePart(mi,COALESCE([LastDeltaDate],@localdate)) AS varchar(2)),2))
					,'SS',Right('0'+ CAST(DatePart(ss,COALESCE([LastDeltaDate],@localdate)) AS varchar(2)),2))			


			--Query
				,SourceSQL = 
					CASE
					-- Customized for simple Purview ATLAS API
					   WHEN Backend IN ('ATLAS REST API','AZURE REST API') THEN EntityName 

					 --DEFAULT ANSI SQL for Delta Table
						WHEN [EntityName] IS NOT NULL AND [DeltaName] IS NOT NULL AND [LastDeltaDate] IS NOT NULL
							THEN 
								CASE 
									WHEN datediff_big(minute,[LastDeltaDate],@localdate) > [MaxIntervalMinutes]
										THEN 
											'SELECT * FROM ' + [EntityName] + ' WHERE ' 
											+ [DeltaName] + ' > ' + ''''+CONVERT(VARCHAR(30),[LastDeltaDate],121) +''''+ ' AND ' + [DeltaName] + '<=' +  ''''+ CONVERT(VARCHAR(30), DATEADD(minute,[MaxIntervalMinutes],[LastDeltaDate]),121) +''''
									ELSE 
										'SELECT * FROM ' + [EntityName] + ' WHERE ' 
										+ [DeltaName] + ' > ' + ''''+ CONVERT(VARCHAR(30),[LastDeltaDate],121) +''''+ ' AND ' + [DeltaName] + '<='  + ''''+ CONVERT(VARCHAR(30), @localdate,120) +''''
								END
					 --DEFAULT ANSI SQL for Full Table
						WHEN [EntityName] IS NOT NULL AND [DeltaName] IS NULL
							THEN 
								'SELECT * FROM ' + [EntityName]
					--Running Number
						WHEN [EntityName] IS NOT NULL AND [DeltaName] IS NOT NULL AND [LastDeltaNumber] IS NOT NULL
							THEN 'SELECT * FROM ' + [EntityName] + ' WHERE ' 
												+ [DeltaName] + ' > ' + ''''+CONVERT(VARCHAR,[LastDeltaNumber]) +'''' + [DeltaName] + ' <= ' + ''''+CONVERT(VARCHAR,([LastDeltaNumber] + [MaxIntervalNumber])) +''''
						ELSE NULL
					 END
			
			--Stats Query
				,StatSQL = 
					
					CASE 
						-- Customized for simple Purview ATLAS API
					   WHEN Backend IN ('ATLAS REST API','AZURE REST API') THEN EntityName 

						--DEFAULT ANSI SQL For Delta Table
						WHEN [EntityName] IS NOT NULL AND [DeltaName] IS NOT NULL AND [LastDeltaDate] IS NOT NULL
								THEN 
									CASE 
										WHEN datediff_big(minute,[LastDeltaDate],@localdate) > [MaxIntervalMinutes] 
											THEN 
												'SELECT MIN('+[DeltaName]+') AS DataFromTimestamp, MAX('+[DeltaName]+') AS DataToTimestamp, count(1) as SourceCount FROM ' + [EntityName] + ' WHERE ' 
												+ [DeltaName] + ' > ' + ''''+CONVERT(varchar(30),LastDeltaDate,121)+''''+ ' AND ' + [DeltaName] + ' <= ' + ''''+CONVERT(varchar(30), DATEADD(minute,[MaxIntervalMinutes],[LastDeltaDate]),121)+''''
										ELSE 
											'SELECT MIN('+[DeltaName]+') AS DataFromTimestamp, MAX('+[DeltaName]+') AS DataToTimestamp, count(1) as SourceCount FROM ' + [EntityName] + ' WHERE ' 
											+ [DeltaName] + ' > ' + ''''+CONVERT(varchar(30),[LastDeltaDate],121) +''''+ ' AND ' + [DeltaName] + ' <= ' + ''''+ CONVERT(varchar(30),(@localdate),120)+''''
										END
						--Common No Delta
							WHEN [EntityName] IS NOT NULL AND [DeltaName] IS NULL
								THEN 'SELECT ''1900-01-01 00:00:00'' AS DataFromTimestamp, '''+CONVERT(VARCHAR(30),ELT.uf_GetAestDateTime(),120)+''' AS DataToTimestamp,  COUNT(*) AS SourceCount FROM ' + [EntityName]
						--Running Number
							WHEN [EntityName] IS NOT NULL AND [DeltaName] IS NOT NULL AND [LastDeltaNumber] IS NOT NULL
									THEN 'SELECT MIN('+[DeltaName]+') AS DataFromTimestamp,' + ' MAX('+[DeltaName]+') AS DataToTimestamp,'+ 'COUNT(*) AS SourceCount FROM ' + [EntityName]
													+ [DeltaName] + ' > ' + ''''+CONVERT(VARCHAR,[LastDeltaNumber])+'''' + ' AND ' + [DeltaName] + ' <= ' + ''''+CONVERT(VARCHAR,([LastDeltaNumber] + [MaxIntervalNumber]))+''''
							ELSE NULL
					 END

				, CAST(0 AS BIT) AS [ReloadFlag]
				, NULL AS [ADFPipelineRunID]
			FROM 
				[ELT].[IngestDefinition]
			WHERE 
				[SourceSystemName]=@SourceSystemName
				AND [StreamName] LIKE COALESCE(@StreamName, [StreamName])
				AND [ActiveFlag]=1

--ReRun
UNION
		SELECT 
				[ID].[IngestID]
				,[SourceSystemName]
				,[StreamName]
				,[Backend]
				,[EntityName]
				,[DeltaName]
				,[LastDeltaDate]
				,II.[DataFromTimestamp]
				,II.[DataToTimestamp]
				,ID.[LastDeltaNumber]
				,II.[DataFromNumber]
				,II.[DataToNumber]
				,[DataFormat]
				,[SourceStructure]
				,ID.[MaxIntervalMinutes]
				,ID.[MaxIntervalNumber]
				,ID.[DataMapping]
				,ID.[RunSequence]
				,[ActiveFlag]
				,[L1TransformationReqdFlag]
				,[L2TransformationReqdFlag]
				,[DelayL1TransformationFlag]
				,[DelayL2TransformationFlag]
				,II.[DestinationRawFileSystem]
				,II.[DestinationRawFolder]
				,II.[DestinationRawFile] 		
			
				--Derived Fields
				,SourceSQL = 
					CASE
						-- Customized for simple Purview ATLAS API
					    WHEN Backend IN ('ATLAS REST API','AZURE REST API') THEN EntityName 
						--DEFAULT ANSI SQL for Delta Table
						WHEN [EntityName] IS NOT NULL AND [DeltaName] IS NOT NULL AND [LastDeltaDate] IS NOT NULL 
							THEN 'SELECT * FROM ' + [EntityName] + ' WHERE ' 
									+ [DeltaName] + ' > ' + ''''+ CONVERT(varchar(30),II.[DataFromTimestamp],121)+''''+ ' AND ' + [DeltaName] + ' <= ' + ''''+ CONVERT(varchar(30),II.[DataToTimestamp],121)+''''
						--Common No Delta
						WHEN [EntityName] IS NOT NULL AND [DeltaName] IS NULL
							THEN 'SELECT * FROM ' + [EntityName]
						--Running Number
						WHEN [EntityName] IS NOT NULL AND [DeltaName] IS NOT NULL AND [LastDeltaNumber] IS NOT NULL
								THEN 'SELECT * FROM ' + [EntityName] + ' WHERE ' 
												+ [DeltaName] + ' > ' + ''''+CONVERT(VARCHAR,II.[DataFromNumber])+'''' + ' AND ' + [DeltaName] + ' <= ' + ''''+CONVERT(VARCHAR,II.[DataToNumber])+''''
						
						ELSE NULL
					END

				,StatSQL = 
					CASE 
					-- Customized for simple Purview ATLAS API
					   WHEN Backend IN ('ATLAS REST API','AZURE REST API') THEN EntityName 

					--DEFAULT ANSI SQL for Delta Table
						WHEN [EntityName] IS NOT NULL AND [DeltaName] IS NOT NULL AND [LastDeltaDate] IS NOT NULL THEN
									'SELECT MIN('+[DeltaName]+') AS DataFromTimestamp, MAX('+[DeltaName]+') AS DataToTimestamp, count(1) as SourceCount FROM ' 
									+ [EntityName] + ' WHERE ' + [DeltaName] + '>' + ''''+CONVERT(varchar(30),II.DataFromTimestamp,121)+''''+ ' AND ' + [DeltaName] + '<='+ ''''+CONVERT(varchar(30),II.[DataToTimestamp],121)+''''
					--Common No Delta
						WHEN [EntityName] IS NOT NULL AND [DeltaName] IS NULL AND [LastDeltaDate] IS NOT NULL 
							THEN 'SELECT MIN('+[DeltaName]+') AS DataFromTimestamp,' + ' MAX('+[DeltaName]+') AS DataToTimestamp,'+ 'COUNT(*) AS SourceCount FROM ' + [EntityName]
					--Common No Delta
						WHEN [EntityName] IS NOT NULL AND [DeltaName] IS NULL
							THEN 'SELECT SELECT ''1900-01-01 00:00:00'' AS DataFromTimestamp, '''+CONVERT(VARCHAR(30),ELT.uf_GetAestDateTime(),120)+''' AS DataToTimestamp, COUNT(*) AS SourceCount FROM ' + [EntityName]
					--Running Number
						WHEN [EntityName] IS NOT NULL AND [DeltaName] IS NOT NULL AND [LastDeltaNumber] IS NOT NULL
								THEN 'SELECT MIN('+[DeltaName]+') AS DataFromTimestamp,' + ' MAX('+[DeltaName]+') AS DataToTimestamp,'+ 'COUNT(*) AS SourceCount FROM ' + [EntityName]
												+ [DeltaName] + ' > ' + ''''+CONVERT(VARCHAR,II.[DataFromNumber]) +'''' + ' AND ' + [DeltaName] + ' <= ' + ''''+CONVERT(VARCHAR,II.[DataToNumber])+''''
						ELSE NULL 	
					END

				,II.[ReloadFlag]
				, II.[ADFIngestPipelineRunID]
			FROM 
				[ELT].[IngestDefinition] ID
					INNER JOIN [ELT].[IngestInstance] AS II
						ON II.[IngestID]= ID.[IngestID] 
						AND II.[ReloadFlag]=1
						AND (II.[IngestStatus] is NULL OR II.[IngestStatus] != 'Running')  --Fetch new instances and ignore instances that are currently running
			WHERE 
				ID.[SourceSystemName]=@SourceSystemName
				AND ID.[StreamName] LIKE COALESCE(@StreamName, [StreamName])
				AND ID.[ActiveFlag]=1 
				AND ISNULL(II.RetryCount,0) <= ID.MaxRetries
				
	)
	SELECT 
		TOP (@MaxIngestInstance) *  
	FROM CTE
	ORDER BY 
		[RunSequence] ASC, [DataFromTimestamp] DESC, [DataToTimestamp] DESC

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceSystemName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[StreamName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[Backend]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[EntityName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DeltaName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[LastDeltaDate]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[MaxIntervalMinutes]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[LastDeltaNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[MaxIntervalNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DataFormat]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceStructure]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DataMapping]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[RunSequence]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[L1TransformationReqdFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[L2TransformationReqdFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DelayL1TransformationFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DelayL2TransformationFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DestinationRawFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DestinationRawFolder]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DestinationRawFile]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetAestDateTime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetIngestDefinition].[@SourceSystemName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetIngestDefinition].[@StreamName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[ReloadFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[IngestStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceSystemName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[StreamName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[Backend]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[EntityName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DeltaName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[LastDeltaDate]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DataFromTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DataToTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[LastDeltaNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DataFromNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DataToNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DataFormat]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceStructure]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[MaxIntervalMinutes]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[MaxIntervalNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DataMapping]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[RunSequence]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[L1TransformationReqdFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[L2TransformationReqdFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DelayL1TransformationFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DelayL2TransformationFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DestinationRawFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DestinationRawFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DestinationRawFile]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[LastDeltaNumber]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetAestDateTime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[ADFIngestPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceSystemName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[StreamName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[RetryCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[MaxRetries]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetIngestDefinition].[@MaxIngestInstance]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[ELT].[GetIngestDefinition].[CTE1].[cte]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[IngestID]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[IngestID]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[SourceSystemName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[SourceSystemName]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[StreamName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[StreamName]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[Backend]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[Backend]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[EntityName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[EntityName]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[DeltaName]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[DeltaName]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[LastDeltaDate]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[LastDeltaDate]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[DataFromTimestamp]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[DataToTimestamp]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[LastDeltaNumber]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[LastDeltaNumber]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[DataFromNumber]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[DataToNumber]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[DataFormat]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[DataFormat]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[SourceStructure]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[SourceStructure]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[MaxIntervalMinutes]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[MaxIntervalMinutes]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[MaxIntervalNumber]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[MaxIntervalNumber]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[DataMapping]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[DataMapping]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[RunSequence]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[RunSequence]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[ActiveFlag]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[ActiveFlag]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[L1TransformationReqdFlag]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[L1TransformationReqdFlag]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[L2TransformationReqdFlag]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[L2TransformationReqdFlag]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[DelayL1TransformationFlag]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[DelayL1TransformationFlag]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[DelayL2TransformationFlag]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[DelayL2TransformationFlag]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[DestinationRawFileSystem]">
									<Relationship Name="ExpressionDependencies">
										<Entry>
											<References Name="[ELT].[IngestDefinition].[DestinationRawFileSystem]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[DestinationRawFolder]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[DestinationRawFile]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[SourceSQL]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[StatSQL]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[ReloadFlag]" />
							</Entry>
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[GetIngestDefinition].[CTE1].[cte].[ADFPipelineRunID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetIngestDefinition].[@SourceSystemName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetIngestDefinition].[@StreamName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['%']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetIngestDefinition].[@MaxIngestInstance]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[10]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="11332" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[GetIngestDefinition]&#xD;&#xA;&#x9;@SourceSystemName varchar(20),&#xD;&#xA;&#x9;@StreamName VARCHAR(100) = '%', --Default =All Streams&#xD;&#xA;&#x9;@MaxIngestInstance INT = 10&#xD;&#xA;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[GetIngestDefinition_FileDrop]">
			<Property Name="BodyScript">
				<Value><![CDATA[
--/*
--Generic Stored Procedure to be used for File Drop Pipelines instead of the [ELT].[GetIngestDefinition] procedure which is relevant for database ingest pipelines
--*/
BEGIN
--For Testing


	DECLARE @IngestID INT
	SELECT @IngestID = [IngestID] FROM [ELT].[IngestDefinition] WHERE [SourceSystemName]=@SourceSystemName AND [StreamName]=@StreamName and [ActiveFlag]=1

	--If the Source File already exists (Reload)
	IF EXISTS ( SELECT 1 FROM [ELT].[IngestInstance] 
				WHERE (
						CASE 
							WHEN [SourceFileDropFileSystem] IS NULL 
								THEN [SourceFileDropFolder] --In most cases container will be null as it is part of folder name from event trigger
							WHEN [SourceFileDropFileSystem] IS NOT NULL AND LEN(RTRIM([SourceFileDropFolder])) =0 
								THEN [SourceFileDropFolder]
							ELSE [SourceFileDropFileSystem] +'/' + [SourceFileDropFolder]
					   END ) =@SourceFolder 
				AND [SourceFileDropFile]=@SourceFile)
		
BEGIN
		SELECT 
			top 1 
			II.[IngestID]
			, ID.[SourceSystemName]
			, ID.[StreamName]
			,ID.[Backend]
			,ID.[DataFormat]
			, II.[SourceFileDropFileSystem]
			, REPLACE(II.[SourceFileDropFolder],ID.[SourceFileDropFileSystem] +'/','') AS [SourceFileDropFolder] --Remove container name from folder path
			, II.[SourceFileDropFile]
			, ID.[SourceFileDelimiter]
			, ID.[SourceFileHeaderFlag]
			, II.[DestinationRawFileSystem]
			, II.[DestinationRawFolder]
			, II.[DestinationRawFile]
			, ID.[DataMapping]
			, CAST(1 AS BIT) AS [ReloadFlag]
			, ID.[L1TransformationReqdFlag]
			, ID.[L2TransformationReqdFlag]
			, ID.[DelayL1TransformationFlag]
			, ID.[DelayL2TransformationFlag]
			, II.[ADFIngestPipelineRunID]
			FROM 
				[ELT].[IngestInstance] AS II
					INNER JOIN [ELT].[IngestDefinition] AS ID
						ON II.[IngestID] =ID.[IngestID]
							AND II.[IngestID]=@IngestID
							AND (
								CASE 
									WHEN II.[SourceFileDropFileSystem] IS NULL 
										THEN II.[SourceFileDropFolder] --In most cases container will be null as it is part of folder name from event trigger
									WHEN II.[SourceFileDropFolder] IS NOT NULL AND LEN(RTRIM(II.[SourceFileDropFileSystem])) =0 
										THEN II.[SourceFileDropFolder] 
									ELSE II.[SourceFileDropFileSystem] +'/' + II.[SourceFileDropFolder]
								END ) = @SourceFolder 
							AND II.[SourceFileDropFile]=@SourceFile
			ORDER BY [IngestInstanceID] DESC
		END
	ELSE
	--If this is a new file
		BEGIN

		DECLARE @localdate as datetime	= CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')

		SELECT 
			[IngestID]
			, [SourceSystemName]
			, [StreamName]		
			,[Backend]
			,[DataFormat]
			, [SourceFileDropFileSystem]
			, REPLACE(@SourceFolder,[SourceFileDropFileSystem] +'/','')  AS [SourceFileDropFolder] --Remove container name from folder path
			, @SourceFile AS [SourceFileDropFile]
			, [SourceFileDelimiter]
			, [SourceFileHeaderFlag]
			, [DestinationRawFileSystem]
			, [DestinationRawFolder] = 
				REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE([DestinationRawFolder] COLLATE SQL_Latin1_General_CP1_CS_AS
				,'YYYY',CAST(Year(@localdate) as varchar(4)))
				,'MM',Right('0'+ CAST(Month(@localdate) AS varchar(2)),2))
				,'DD',Right('0'+Cast(Day(@localdate) as varchar(2)),2))
				,'HH',Right('0'+ CAST(DatePart(hh,@localdate) as varchar(2)),2))
				,'MI',Right('0'+ CAST(DatePart(mi,@localdate) as varchar(2)),2))
				,'SS',Right('0'+ CAST(DatePart(ss,@localdate) as varchar(2)),2))
			
			, [DestinationRawFile] = 
				REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE([DestinationRawFile] COLLATE SQL_Latin1_General_CP1_CS_AS
				,'YYYY',CAST(Year(@localdate) AS varchar(4)))
				,'MM',Right('0'+ CAST(Month(@localdate) AS varchar(2)),2))
				,'DD',Right('0'+Cast(Day(@localdate) as varchar(2)),2))
				,'HH',Right('0'+ CAST(DatePart(hh,@localdate) AS varchar(2)),2))
				,'MI',Right('0'+ CAST(DatePart(mi,@localdate) AS varchar(2)),2))
				,'SS',Right('0'+ CAST(DatePart(ss,@localdate) AS varchar(2)),2))
			, [DataMapping]
			, CAST(0 AS BIT) AS [ReloadFlag]
			, [L1TransformationReqdFlag]
			, [L2TransformationReqdFlag]
			, [DelayL1TransformationFlag]
			, [DelayL2TransformationFlag]
			, NULL AS [ADFPipelineRunID]
			
			FROM 
				[ELT].[IngestDefinition]
			WHERE 
				[IngestID]=@IngestID
		END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceSystemName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetIngestDefinition_FileDrop].[@SourceSystemName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[StreamName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetIngestDefinition_FileDrop].[@StreamName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[SourceFileDropFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[SourceFileDropFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetIngestDefinition_FileDrop].[@SourceFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[SourceFileDropFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetIngestDefinition_FileDrop].[@SourceFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[SourceFileDropFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[SourceFileDropFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[SourceFileDropFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceSystemName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[StreamName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[Backend]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DataFormat]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceFileDropFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceFileHeaderFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DestinationRawFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DestinationRawFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DestinationRawFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DataMapping]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[L1TransformationReqdFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[L2TransformationReqdFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DelayL1TransformationFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DelayL2TransformationFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[ADFIngestPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[IngestInstanceID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[Backend]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DataFormat]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceFileDropFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceFileHeaderFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DestinationRawFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DestinationRawFolder]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DestinationRawFile]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DataMapping]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[bit]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[L1TransformationReqdFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[L2TransformationReqdFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DelayL1TransformationFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DelayL2TransformationFlag]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetIngestDefinition_FileDrop].[@SourceSystemName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetIngestDefinition_FileDrop].[@StreamName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetIngestDefinition_FileDrop].[@SourceFolder]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="250" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetIngestDefinition_FileDrop].[@SourceFile]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="4607" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[GetIngestDefinition_FileDrop]&#xD;&#xA;&#x9;@SourceSystemName varchar(20),&#xD;&#xA;&#x9;@StreamName VARCHAR(100),&#xD;&#xA;&#x9;@SourceFolder VARCHAR(250), --where SourceFolder=Container/Folder&#xD;&#xA;&#x9;@SourceFile VARCHAR(200)&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[GetRunningTransformInstances]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	--Get the count of transform instances (L1 and L2) still active and running in last @timespanHrs
	DECLARE @L1Count INT, @L2Count INT

	IF @timespanHrs IS NULL OR @timespanHrs<=0 
		SET @timespanHrs=24

	SELECT @L1Count = COUNT(1)
	FROM ELT.L1TransformInstance
	WHERE L1TransformStatus='Running' 
	AND DateDiff(hour,L1TransformStartTimestamp,getdate()) <= @timespanHrs

	SELECT @L2Count= COUNT(1)
	FROM ELT.L2TransformInstance
	WHERE L2TransformStatus='Running'
	AND DateDiff(hour,L2TransformStartTimestamp,getdate()) <= @timespanHrs

	SELECT (@L1Count + @L2Count) AS RunningCount

RETURN]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetRunningTransformInstances].[@timespanHrs]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformStartTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformStartTimestamp]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetRunningTransformInstances].[@timespanHrs]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[18]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="714" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[GetRunningTransformInstances]&#xD;&#xA;&#x9;@timespanHrs int = 18 --Default Timespan 18hrs&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[GetTransformDefinition_L1]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	--declare @IngestID int 
	DECLARE @localdate datetime	= CONVERT(datetime,CONVERT(datetimeoffset, getdate()) AT TIME ZONE 'AUS Eastern Standard Time')
	DECLARE @CuratedDate datetime
	SET @CuratedDate = COALESCE(@DeltaDate,@localdate)


		SELECT 
			--PK/FK
			TD.[L1TransformID]
			, TD.[IngestID]

			
			--Databricks
			, TD.[NotebookName]
			, TD.[NotebookPath]
			
			--Custom
			, TD.[CustomParameters]

			 --Raw
			 ,TD.[InputRawFileDelimiter]
			 ,TD.[InputFileHeaderFlag]
			
			--Curated File
			--Need to test how this performs with a file drop and filedrop reload.
			--Possibly use date drop file was dropped?
			,TD.[OutputL1CurateFileSystem]
			
			,[OutputL1CuratedFolder] = 
					REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(TD.[OutputL1CuratedFolder]  COLLATE SQL_Latin1_General_CP1_CS_AS
					,'YYYY',CAST(Year(@CuratedDate) as varchar(4)))
					,'MM',Right('0'+ CAST(Month(@CuratedDate) AS varchar(2)),2))
					,'DD',Right('0'+Cast(Day(@CuratedDate) as varchar(2)),2))
					,'HH',Right('0'+ CAST(DatePart(hh,@CuratedDate) as varchar(2)),2))
					,'MI',Right('0'+ CAST(DatePart(mi,@CuratedDate) as varchar(2)),2))
					,'SS',Right('0'+ CAST(DatePart(ss,@CuratedDate) as varchar(2)),2))

			,[OutputL1CuratedFile] = 
					REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(TD.[OutputL1CuratedFile] COLLATE SQL_Latin1_General_CP1_CS_AS
					,'YYYY',CAST(Year(@CuratedDate) as varchar(4)))
					,'MM',Right('0'+ CAST(Month(@CuratedDate) AS varchar(2)),2))
					,'DD',Right('0'+Cast(Day(@CuratedDate) as varchar(2)),2))
					,'HH',Right('0'+ CAST(DatePart(hh,@CuratedDate) as varchar(2)),2))
					,'MI',Right('0'+ CAST(DatePart(mi,@CuratedDate) as varchar(2)),2))
					,'SS',Right('0'+ CAST(DatePart(ss,@CuratedDate) as varchar(2)),2))

			, TD.[OutputL1CuratedFileDelimiter]
			, TD.[OutputL1CuratedFileFormat]
			, TD.[OutputL1CuratedFileWriteMode]

			--SQL
			, [LookupColumns]
			, TD.[OutputDWStagingTable]
			, TD.[OutputDWTable]
			, TD.[OutputDWTableWriteMode]

			--Max Retries
			, TD.[MaxRetries]
			

		FROM
			[ELT].[L1TransformDefinition] TD
				LEFT JOIN [ELT].[IngestDefinition] ID
					ON TD.[IngestID] = ID.[IngestID]
		WHERE 
			TD.[IngestID] = @IngestID and 
			TD.[ActiveFlag] = 1 
			and ID.[ActiveFlag] = 1 
			and ID.[L1TransformationReqdFlag] =1]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformDefinition_L1].[@DeltaDate]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[L1TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[NotebookName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[NotebookPath]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[CustomParameters]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[InputRawFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[InputFileHeaderFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[OutputL1CurateFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[OutputL1CuratedFolder]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[OutputL1CuratedFile]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[OutputL1CuratedFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[OutputL1CuratedFileFormat]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[OutputL1CuratedFileWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[LookupColumns]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[OutputDWStagingTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[OutputDWTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[OutputDWTableWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[MaxRetries]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformDefinition_L1].[@IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[L1TransformationReqdFlag]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformDefinition_L1].[@IngestID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformDefinition_L1].[@DeltaDate]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2464" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[GetTransformDefinition_L1] &#xD;&#xA;&#x9;&#x9;@IngestID int, &#xD;&#xA;&#x9;&#x9;@DeltaDate datetime = null &#x9;&#x9;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[GetTransformDefinition_L2]">
			<Property Name="BodyScript">
				<Value><![CDATA[
	--declare @IngestID int
	DECLARE @localdate datetime	= CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')

	--Should be using L2DeltaTransformDate, if null then LocalDate
		SELECT
			--PK/FK
			TD.[L2TransformID]
			, TD.[IngestID]
			, TD.[L1TransformID]

			--Databricks
			, TD.[NotebookName]
			, TD.[NotebookPath]

			--Custom
			, TD.[CustomParameters]

			--InputType
			,TD.[InputType]

			 --Raw
			,TD.[InputFileSystem]
			,TD.[InputFileFolder]
			,TD.[InputFile]
			,TD.[InputFileDelimiter]
			,TD.[InputFileHeaderFlag]
			,TD.[InputDWTable]

			--Deltas
			,TD.[DeltaName]
			,[DataFromTimestamp] = NULL
			,[DataToTimestamp] = NULL
			,[DataFromNumber] = NULL
			,[DataToNumber] = NULL
			,TD.[MaxIntervalMinutes]
			,TD.[MaxIntervalNumber]
			

			--Retry
			,TD.[MaxRetries]

			--Curated File
			--Need to test how this performs with a file drop and filedrop reload. Possibly use date drop file was dropped?
			,TD.[OutputL2CurateFileSystem]
		
			,[OutputL2CuratedFolder] = 
					REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(TD.[OutputL2CuratedFolder] COLLATE SQL_Latin1_General_CP1_CS_AS
					,'YYYY',CAST(Year(COALESCE(TD.[LastDeltaDate],@DeltaDate,@localdate)) as varchar(4)))
					,'MM',Right('0'+ CAST(Month(COALESCE(TD.[LastDeltaDate],@DeltaDate,@localdate)) AS varchar(2)),2))
					,'DD',Right('0'+Cast(Day(COALESCE(TD.[LastDeltaDate],@localdate)) as varchar(2)),2))
					,'HH',Right('0'+ CAST(DatePart(hh,COALESCE(TD.[LastDeltaDate],@DeltaDate,@localdate)) as varchar(2)),2))
					,'MI',Right('0'+ CAST(DatePart(mi,COALESCE(TD.[LastDeltaDate],@DeltaDate,@localdate)) as varchar(2)),2))
					,'SS',Right('0'+ CAST(DatePart(ss,COALESCE(TD.[LastDeltaDate],@DeltaDate,@localdate)) as varchar(2)),2))

			,[OutputL2CuratedFile] = 
					REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(TD.[OutputL2CuratedFile] COLLATE SQL_Latin1_General_CP1_CS_AS
					,'YYYY',CAST(Year(COALESCE(TD.[LastDeltaDate],@DeltaDate,@localdate)) as varchar(4)))
					,'MM',Right('0'+ CAST(Month(COALESCE(TD.[LastDeltaDate],@DeltaDate,@localdate)) AS varchar(2)),2))
					,'DD',Right('0'+Cast(Day(COALESCE(TD.[LastDeltaDate],@DeltaDate,@localdate)) as varchar(2)),2))
					,'HH',Right('0'+ CAST(DatePart(hh,COALESCE(TD.[LastDeltaDate],@DeltaDate,@localdate)) as varchar(2)),2))
					,'MI',Right('0'+ CAST(DatePart(mi,COALESCE(TD.[LastDeltaDate],@DeltaDate,@localdate)) as varchar(2)),2))
					,'SS',Right('0'+ CAST(DatePart(ss,COALESCE(TD.[LastDeltaDate],@DeltaDate,@localdate)) as varchar(2)),2))

			, TD.[OutputL2CuratedFileDelimiter]
			, TD.[OutputL2CuratedFileFormat]
			, TD.[OutputL2CuratedFileWriteMode]

			--SQL
			,TD.[OutputDWStagingTable]
			,TD.[LookupColumns]
			,TD.[OutputDWTable]
			,TD.[OutputDWTableWriteMode]
			

		FROM
			[ELT].[L2TransformDefinition] TD
				LEFT JOIN [ELT].[IngestDefinition] ID
					ON TD.[IngestID] = ID.[IngestID]
		WHERE 
			TD.[IngestID] = @IngestID and 
			TD.[ActiveFlag] = 1
			and ID.[ActiveFlag] = 1
			and ID.[L2TransformationReqdFlag] =1
			and TD.[InputType] like COALESCE(@InputType,TD.[InputType])]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[L2TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[L1TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[NotebookName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[NotebookPath]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[CustomParameters]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[InputType]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[InputFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[InputFileFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[InputFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[InputFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[InputFileHeaderFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[InputDWTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[DeltaName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[MaxIntervalMinutes]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[MaxIntervalNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[MaxRetries]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[OutputL2CurateFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[OutputL2CuratedFolder]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[LastDeltaDate]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformDefinition_L2].[@DeltaDate]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[OutputL2CuratedFile]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[OutputL2CuratedFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[OutputL2CuratedFileFormat]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[OutputL2CuratedFileWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[OutputDWStagingTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[LookupColumns]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[OutputDWTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[OutputDWTableWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformDefinition_L2].[@IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[L2TransformationReqdFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformDefinition_L2].[@InputType]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformDefinition_L2].[@IngestID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformDefinition_L2].[@DeltaDate]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformDefinition_L2].[@InputType]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['%']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="3317" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[GetTransformDefinition_L2] &#xD;&#xA;&#x9;&#x9;@IngestID int, &#xD;&#xA;&#x9;&#x9;@DeltaDate datetime = null,&#xD;&#xA;&#x9;&#x9;@InputType varchar(15) = '%'&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[GetTransformInstance_L1]">
			<Property Name="BodyScript">
				<Value><![CDATA[
begin
	--Limit Number of Transform Instances to prevent queuing at DWH
		SELECT top (@MaxTransformInstance) 
			L1TI.[L1TransformInstanceID]
			, L1TI.[L1TransformID]
			, L1TI.[IngestID]	
			, L1TI.[NotebookName]
			, L1TI.[NotebookPath]
			, L1TI.[CustomParameters]
			, L1TI.[InputRawFileSystem]
			, L1TI.[InputRawFileFolder]
			, L1TI.[InputRawFile]
			, L1TI.[InputRawFileDelimiter]
			, L1TI.[InputFileHeaderFlag]
			, L1TI.[OutputL1CurateFileSystem]
			, L1TI.[OutputL1CuratedFolder]
			, L1TI.[OutputL1CuratedFile]
			, L1TI.[OutputL1CuratedFileDelimiter]
			, L1TI.[OutputL1CuratedFileFormat]
			, L1TI.[OutputL1CuratedFileWriteMode]
			, L1TI.[OutputDWStagingTable]
			, L1TI.[LookupColumns]
			, L1TI.[OutputDWTable]
			, L1TI.[OutputDWTableWriteMode]
			, L1TI.[ReRunL1TransformFlag]
			, L1TD.[MaxRetries]
			, L1TD.[DeltaName]
			
		FROM 
			[ELT].[L1TransformInstance] as L1TI
				LEFT JOIN [ELT].[L1TransformDefinition] as L1TD
					ON L1TI.[L1TransformID] = L1TD.[L1TransformID]
				LEFT JOIN [ELT].[IngestDefinition] as ID
					ON id.[IngestID]= L1TD.[IngestID]		
			WHERE 
				ID.[SourceSystemName] =@SourceSystemName
				AND ID.[StreamName] like COALESCE(@StreamName,id.[StreamName])
				AND (ID.ActiveFlag = 1 AND L1TD.ActiveFlag = 1)
				AND (L1TI.[ActiveFlag]=1 OR L1TI.[ReRunL1TransformFlag]=1)
				AND L1TI.[L1TransformInstanceID] = COALESCE(@L1TransformInstanceId, L1TI.[L1TransformInstanceID])
				AND (L1TI.[L1TransformStatus] IS NULL OR L1TI.[L1TransformStatus] NOT IN ('Running','DWUpload'))  --Fetch new instances and ignore instances that are currently running
				AND ID.[DelayL1TransformationFlag] = COALESCE(@DelayL1TransformationFlag,ID.[DelayL1TransformationFlag])
				AND ISNULL(L1TI.RetryCount,0) <= L1TD.MaxRetries
			ORDER BY L1TI.[L1TransformInstanceID] ASC
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[ELT].[L1TransformInstance]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[L1TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformInstance_L1].[@MaxTransformInstance]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformInstanceID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[NotebookName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[NotebookPath]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[CustomParameters]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[InputRawFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[InputRawFileFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[InputRawFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[InputRawFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[InputFileHeaderFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputL1CurateFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputL1CuratedFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputL1CuratedFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputL1CuratedFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputL1CuratedFileFormat]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputL1CuratedFileWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputDWStagingTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[LookupColumns]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputDWTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputDWTableWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[ReRunL1TransformFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[MaxRetries]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[DeltaName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceSystemName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformInstance_L1].[@SourceSystemName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[StreamName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformInstance_L1].[@StreamName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[StreamName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformDefinition].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformInstance_L1].[@L1TransformInstanceId]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DelayL1TransformationFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformInstance_L1].[@DelayL1TransformationFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[RetryCount]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformInstance_L1].[@SourceSystemName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformInstance_L1].[@StreamName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['%']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformInstance_L1].[@MaxTransformInstance]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[10]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformInstance_L1].[@L1TransformInstanceId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformInstance_L1].[@DelayL1TransformationFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2422" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[GetTransformInstance_L1]&#xD;&#xA;&#x9;@SourceSystemName varchar(20),&#xD;&#xA;&#x9;@StreamName varchar(100) = '%',&#xD;&#xA;&#x9;@MaxTransformInstance int = 10,&#xD;&#xA;&#x9;@L1TransformInstanceId INT = NULL, --To fetch all transform instances set Parameter as NULL otherwise provide a specific instance id&#xD;&#xA;&#x9;@DelayL1TransformationFlag INT=NULL --Pass @DelayL1TransformationFlag=0 to fetch all instances that needs to be transformed in the current pipeline (usually the ingestion pipeline). Pass @DelayL1TransformationFlag=1 to fetch all transformations that are scheduled for a later time.&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[GetTransformInstance_L2]">
			<Property Name="BodyScript">
				<Value><![CDATA[
begin
	--Limit Number of Transform Instances to prevent queuing at DWH
		SELECT TOP 
			(@MaxTransformInstance) 
			L2TI.[L2TransformInstanceID]
			, L2TI.[L2TransformID]
			, L2TI.[IngestID]
			, L2TI.[L1TransformID]
			, L2TI.[NotebookPath]
			, L2TI.[NotebookName]
			, L2TI.[CustomParameters]
			, L2TD.[InputType]
			, L2TI.[InputFileSystem]
			, L2TI.[InputFileFolder]
			, L2TI.[InputFile]
			, L2TI.[InputFileDelimiter]
			, L2TI.[InputFileHeaderFlag]
			, L2TI.[InputDWTable]
			, L2TI.[DeltaName]
			, L2TI.[DataFromTimestamp]
			, L2TI.[DataToTimestamp]
			, L2TI.[DataFromNumber]
			, L2TI.[DataToNumber]
			, L2TI.[OutputL2CurateFileSystem]
			, L2TI.[OutputL2CuratedFolder]
			, L2TI.[OutputL2CuratedFile]
			, L2TI.[OutputL2CuratedFileDelimiter]
			, L2TI.[OutputL2CuratedFileFormat]
			, L2TI.[OutputL2CuratedFileWriteMode]
			, L2TI.[OutputDWStagingTable]
			, L2TI.[LookupColumns]
			, L2TI.[OutputDWTable]
			, L2TI.[OutputDWTableWriteMode]
			, L2TI.[ReRunL2TransformFlag]
			, L2TD.[MaxRetries]
	
		FROM 
			[ELT].[L2TransformInstance] as L2TI
				LEFT JOIN [ELT].[L2TransformDefinition] as L2TD
					ON L2TI.[L2TransformID] = L2TD.[L2TransformID]
				LEFT JOIN [ELT].[IngestDefinition] as ID
					ON id.[IngestID]= L2TD.[IngestID]			
			WHERE 
				ID.[SourceSystemName] =@SourceSystemName
				AND ID.[StreamName] like COALESCE(@StreamName,id.[StreamName])
				AND (ID.ActiveFlag = 1 AND L2TD.ActiveFlag = 1)
				AND (L2TI.[ActiveFlag]=1 OR L2TI.[ReRunL2TransformFlag]=1)
				AND L2TI.[L2TransformInstanceID] = COALESCE(@L2TransformInstanceId, L2TI.[L2TransformInstanceID])
				AND (L2TI.[L2TransformStatus] IS NULL OR L2TI.[L2TransformStatus] NOT IN ('Running','DWUpload'))  --Fetch new instances and ignore instances that are currently running
				AND ID.[DelayL2TransformationFlag] = COALESCE(@DelayL2TransformationFlag,ID.[DelayL2TransformationFlag])
				AND L2TD.[InputType] like COALESCE(@InputType,L2TD.[InputType])
				--AND ISNULL(L2TI.RetryCount,0) <= L2TD.MaxRetries
				AND  L2TI.[L2TransformID]= (CASE WHEN @L2TransformID=0 then  L2TI.[L2TransformID] ELSE  @L2TransformID END)
			ORDER BY L2TD.RunSequence ASC, L2TI.[L2TransformInstanceID] ASC
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[ELT].[L2TransformInstance]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[L2TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformInstance_L2].[@MaxTransformInstance]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformInstanceID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L1TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[NotebookPath]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[NotebookName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[CustomParameters]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[InputType]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[InputFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[InputFileFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[InputFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[InputFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[InputFileHeaderFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[InputDWTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[DeltaName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[DataFromTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[DataToTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[DataFromNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[DataToNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CurateFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFileFormat]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFileWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputDWStagingTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[LookupColumns]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputDWTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputDWTableWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[ReRunL2TransformFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[MaxRetries]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[SourceSystemName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformInstance_L2].[@SourceSystemName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[StreamName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformInstance_L2].[@StreamName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[StreamName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformInstance_L2].[@L2TransformInstanceId]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[DelayL2TransformationFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformInstance_L2].[@DelayL2TransformationFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformInstance_L2].[@InputType]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[GetTransformInstance_L2].[@L2TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[RunSequence]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformInstance_L2].[@SourceSystemName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformInstance_L2].[@StreamName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['%']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformInstance_L2].[@MaxTransformInstance]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[10]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformInstance_L2].[@L2TransformInstanceId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformInstance_L2].[@DelayL2TransformationFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformInstance_L2].[@InputType]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA['%']]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[GetTransformInstance_L2].[@L2TransformID]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2992" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[GetTransformInstance_L2]&#xD;&#xA;&#x9;@SourceSystemName varchar(20),&#xD;&#xA;&#x9;@StreamName varchar(100) = '%',&#xD;&#xA;&#x9;@MaxTransformInstance int = 10,&#xD;&#xA;&#x9;@L2TransformInstanceId INT = NULL, --To fetch all transform instances set Parameter as NULL otherwise provide a specific instance id&#xD;&#xA;&#x9;@DelayL2TransformationFlag INT=NULL, --Pass @DelayL2TransformationFlag=0 to fetch all instances that needs to be transformed in the current pipeline (usually the ingestion pipeline). Pass =1 to fetch @DelayL2TransformationFlagh all transformations that are scheduled for a later time.&#xD;&#xA;&#x9;@InputType varchar(15)&#x9;= '%',&#xD;&#xA;&#x9;@L2TransformID INT=0 --To Fetch all transformations for a specific stream pass 0 otherwise provide TransformId prersent in L2Transsformdefinition&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[ELT].[IngestDefinition]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[IngestID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[SourceSystemName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[StreamName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[SourceSystemDescription]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[Backend]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[DataFormat]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[EntityName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[DeltaName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[DeltaFormat]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="30" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[LastDeltaDate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[LastDeltaNumber]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[LastDeltaString]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[MaxIntervalMinutes]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[MaxIntervalNumber]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[DataMapping]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[SourceFileDropFileSystem]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[SourceFileDropFolder]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[SourceFileDropFile]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[SourceFileDelimiter]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[SourceFileHeaderFlag]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[SourceStructure]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[DestinationRawFileSystem]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[DestinationRawFolder]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[DestinationRawFile]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[RunSequence]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[MaxRetries]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[ActiveFlag]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[L1TransformationReqdFlag]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[L2TransformationReqdFlag]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[DelayL1TransformationFlag]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[DelayL2TransformationFlag]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[CreatedTimestamp]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[ModifiedBy]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestDefinition].[ModifiedTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[ELT].[IngestDefinition].[UI_IngestDefinition]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[IngestDefinition].[SourceSystemName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[IngestDefinition].[StreamName]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[ELT].[IngestInstance]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[IngestInstanceID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[IngestID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[SourceFileDropFileSystem]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[SourceFileDropFolder]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[SourceFileDropFile]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[DestinationRawFileSystem]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[DestinationRawFolder]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[DestinationRawFile]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[DataFromTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[DataToTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[DataFromNumber]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[DataToNumber]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[SourceCount]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[IngestCount]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[IngestStartTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[IngestEndTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[IngestStatus]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[RetryCount]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[ReloadFlag]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[CreatedTimestamp]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[ModifiedBy]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[ModifiedTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[IngestInstance].[ADFIngestPipelineRunID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[ELT].[IngestInstance].[UI_IngestInstance]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[IngestInstance].[DestinationRawFileSystem]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[IngestInstance].[DestinationRawFolder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[IngestInstance].[DestinationRawFile]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[ELT].[IngestInstance]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[InsertIngestInstance]">
			<Property Name="BodyScript">
				<Value><![CDATA[

BEGIN

DECLARE @localdate as datetime	= CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')


	--NOTE:Potential enhancements for lookup.
	-- 1. Job to Purge the Instance Tables to Blob after 3 months
	-- 2. Use the AdfPipeline Instance Run ID for the lookup, though this needs to be the individual. Lookup Including Index on the lookup columns.
	-- 3. Create a Hash Column on DestinationFileSystem/Folder/File and use as the lookup. Including Index on the lookup columns.

	--Normal Run
	IF (@ReloadFlag=0 AND NOT EXISTS (
										SELECT 1 
										FROM [ELT].[IngestInstance] 
										WHERE [DestinationRawFileSystem] = @DestinationRawFileSystem
										AND [DestinationRawFolder] = @DestinationRawFolder
										AND [DestinationRawFile] = @DestinationRawFile
									)
		)
	BEGIN
		INSERT INTO [ELT].[IngestInstance]
				   ([IngestID]
				   ,[SourceFileDropFileSystem]
				   ,[SourceFileDropFolder]
				   ,[SourceFileDropFile]
				   ,[DestinationRawFileSystem]
				   ,[DestinationRawFolder]
				   ,[DestinationRawFile]
				   ,[IngestStartTimestamp]
				   ,[IngestEndTimestamp]
				   ,[IngestStatus]
				   ,[RetryCount]
				   ,[ReloadFlag]
				   ,[CreatedBy]
				   ,[CreatedTimestamp]
				   ,[ModifiedBy]
				   ,[ModifiedTimestamp]
				   ,ADFIngestPipelineRunID)
			 VALUES
				   (@IngestID
				   ,@SourceFileDropFileSystem
				   ,@SourceFileDropFolder
				   ,@SourceFileDropFile
				   ,@DestinationRawFileSystem
				   ,@DestinationRawFolder
				   ,@DestinationRawFile
				   ,@localdate
				   ,NULL
				   ,'Running'
				   ,0
                   ,0
				   ,suser_sname()
				   ,@localdate
				   ,NULL
				   ,NULL
				   ,@ADFPipelineRunID)
	END

	--Re-load
	IF (@ReloadFlag=1 
		OR EXISTS (SELECT 1 FROM [ELT].[IngestInstance] 
					WHERE [DestinationRawFileSystem] = @DestinationRawFileSystem
						AND [DestinationRawFolder] = @DestinationRawFolder
						AND [DestinationRawFile] = @DestinationRawFile)
		)
	BEGIN
		Update [ELT].[IngestInstance]
		SET [IngestStartTimestamp] = @localdate
			,[IngestEndTimestamp] = NULL
			,[SourceCount]=NULL
			,[IngestCount]=NULL
			,[IngestStatus]='Running'
			,[ModifiedBy]=suser_sname()
			,[ModifiedTimestamp] = @localdate
			,ADFIngestPipelineRunID = @ADFPipelineRunID
		--Unique Keys
		WHERE [DestinationRawFileSystem] = @DestinationRawFileSystem
		AND [DestinationRawFolder] = @DestinationRawFolder
		AND [DestinationRawFile] = @DestinationRawFile
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertIngestInstance].[@ReloadFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DestinationRawFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertIngestInstance].[@DestinationRawFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DestinationRawFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertIngestInstance].[@DestinationRawFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DestinationRawFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertIngestInstance].[@DestinationRawFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[SourceFileDropFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[SourceFileDropFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[SourceFileDropFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DestinationRawFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DestinationRawFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DestinationRawFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[IngestStartTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[IngestEndTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[IngestStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[RetryCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[ReloadFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[CreatedBy]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[CreatedTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[ModifiedBy]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[ModifiedTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[ADFIngestPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertIngestInstance].[@IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertIngestInstance].[@SourceFileDropFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertIngestInstance].[@SourceFileDropFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertIngestInstance].[@SourceFileDropFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertIngestInstance].[@ADFPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[SourceCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[IngestCount]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertIngestInstance].[@IngestID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertIngestInstance].[@SourceFileDropFileSystem]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertIngestInstance].[@SourceFileDropFolder]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertIngestInstance].[@SourceFileDropFile]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertIngestInstance].[@DestinationRawFileSystem]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertIngestInstance].[@DestinationRawFolder]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertIngestInstance].[@DestinationRawFile]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertIngestInstance].[@ReloadFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertIngestInstance].[@ADFPipelineRunID]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2961" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[InsertIngestInstance]&#xD;&#xA;&#x9;@IngestID INT &#xD;&#xA;&#x9;,@SourceFileDropFileSystem varchar(50)=null &#xD;&#xA;&#x9;,@SourceFileDropFolder varchar(200)=null&#xD;&#xA;&#x9;,@SourceFileDropFile varchar(200)=null&#xD;&#xA;&#x9;,@DestinationRawFileSystem varchar(50)=null &#xD;&#xA;&#x9;,@DestinationRawFolder varchar(200)=null&#xD;&#xA;&#x9;,@DestinationRawFile varchar(200)=null&#xD;&#xA;&#x9;,@ReloadFlag bit =0&#xD;&#xA;&#x9;,@ADFPipelineRunID UniqueIdentifier=null&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[InsertTransformInstance_L1]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN


DECLARE @localdate as datetime	= CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')

	--Check if Transformation records already exists for the input file for same transformation e.g it's a reload
		IF NOT EXISTS 
			(
				SELECT 1 
				FROM 
					[ELT].[L1TransformInstance]
				WHERE 
					[IngestID] = @IngestID
					AND L1TransformID = @L1TransformID
					AND InputRawFileSystem = @InputRawFileSystem
					AND InputRawFileFolder = @InputRawFileFolder
					AND InputRawFile = @InputRawFile
	
			)


	BEGIN
	--If this is a new transformation
		INSERT INTO [ELT].[L1TransformInstance]
			(
				[L1TransformID]
				,[IngestInstanceID]
				,[IngestID]
				,[NotebookName]
				,[NotebookPath]
				,[CustomParameters]
				,[InputRawFileSystem]
				,[InputRawFileFolder]
				,[InputRawFile]
				,[InputRawFileDelimiter]
				,[InputFileHeaderFlag]
				,[OutputL1CurateFileSystem]
				,[OutputL1CuratedFolder]
				,[OutputL1CuratedFile]
				,[OutputL1CuratedFileDelimiter]
				,[OutputL1CuratedFileFormat]
				,[OutputL1CuratedFileWriteMode]
				,[OutputDWStagingTable]
				,[LookupColumns]
				,[OutputDWTable]
				,[OutputDWTableWriteMode]
				,[RetryCount]
				,[ActiveFlag]
				,[IngestCount]
				,[IngestADFPipelineRunID]
				,[CreatedBy]
				,[CreatedTimestamp]
			   
			)
		VALUES
			(
				@L1TransformID
				,@IngestInstanceID
				,@IngestID
				,@NotebookName
				,@NotebookPath
				,@CustomParameters
				,@InputRawFileSystem
				,@InputRawFileFolder
				,@InputRawFile
				,@InputRawFileDelimiter
				,@InputFileHeaderFlag
				,@OutputL1CurateFileSystem
				,@OutputL1CuratedFolder
				,@OutputL1CuratedFile
				,@OutputL1CuratedFileDelimiter
				,@OutputL1CuratedFileFormat
				,@OutputL1CuratedFileWriteMode
				,@OutputDWStagingTable
				,@LookupColumns
				,@OutputDWTable
				,@OutputDWTableWriteMode
				,0
				,1
				,@IngestCount
				,@IngestADFPipelineRunID
				,SUSER_SNAME()
				,@localdate
		)
		END
	ELSE
		--If this is an existing Transformation
		BEGIN
			--Just update one record in case if there are duplicates
			UPDATE TOP (1) [ELT].[L1TransformInstance]
			SET 
				
				[IngestCount] = null
				,[L1TransformCount] = null
				,L1TransformStartTimestamp = null
				,[L1TransformEndTimestamp] = null
				,[L1TransformStatus] = null
				,[RetryCount] = 0
				,[ActiveFlag] = 1
				,[ReRunL1TransformFlag] = 1
				,[IngestADFPipelineRunID] = @IngestADFPipelineRunID
				,[L1TransformADFPipelineRunID] = null
				,[ModifiedBy] = suser_sname()
				,[ModifiedTimestamp] = @localdate
				
		WHERE 
			[IngestID] = @IngestID
			AND L1TransformID = @L1TransformID
			AND InputRawFileSystem = @InputRawFileSystem
			AND InputRawFileFolder = @InputRawFileFolder
			AND InputRawFile = @InputRawFile
		END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@L1TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[InputRawFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@InputRawFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[InputRawFileFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@InputRawFileFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[InputRawFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@InputRawFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[IngestInstanceID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[NotebookName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[NotebookPath]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[CustomParameters]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[InputRawFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[InputRawFileFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[InputRawFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[InputRawFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[InputFileHeaderFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputL1CurateFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputL1CuratedFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputL1CuratedFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputL1CuratedFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputL1CuratedFileFormat]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputL1CuratedFileWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputDWStagingTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[LookupColumns]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputDWTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[OutputDWTableWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[RetryCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[IngestCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[IngestADFPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[CreatedBy]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[CreatedTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@IngestInstanceID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@NotebookName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@NotebookPath]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@CustomParameters]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@InputRawFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@InputFileHeaderFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@OutputL1CurateFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@OutputL1CuratedFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@OutputL1CuratedFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@OutputL1CuratedFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@OutputL1CuratedFileFormat]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@OutputL1CuratedFileWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@OutputDWStagingTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@LookupColumns]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@OutputDWTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@OutputDWTableWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@IngestCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L1].[@IngestADFPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformStartTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformEndTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[ReRunL1TransformFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformADFPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[ModifiedBy]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[ModifiedTimestamp]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@L1TransformID]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@IngestInstanceID]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@IngestID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@NotebookName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@NotebookPath]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@CustomParameters]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@InputRawFileSystem]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@InputRawFileFolder]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@InputRawFile]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@InputRawFileDelimiter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@InputFileHeaderFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@OutputL1CurateFileSystem]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@OutputL1CuratedFolder]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@OutputL1CuratedFile]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@OutputL1CuratedFileDelimiter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@OutputL1CuratedFileFormat]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@OutputL1CuratedFileWriteMode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@OutputDWStagingTable]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@LookupColumns]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="4000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@OutputDWTable]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@OutputDWTableWriteMode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@IngestCount]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L1].[@IngestADFPipelineRunID]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="4029" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[InsertTransformInstance_L1]&#xD;&#xA;&#x9;--PK/FK&#xD;&#xA;&#x9;@L1TransformID int = null,&#xD;&#xA;&#x9;@IngestInstanceID int=null,&#xD;&#xA;&#x9;@IngestID int,&#xD;&#xA;&#xD;&#xA;&#x9;--Databricks Notebook&#xD;&#xA;&#x9;@NotebookName varchar(100) = null,&#xD;&#xA;&#x9;@NotebookPath varchar(200) = null,&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;--Custom&#xD;&#xA;&#x9;@CustomParameters varchar(max) = null,&#xD;&#xA;&#xD;&#xA;&#x9;--Input File&#xD;&#xA;&#x9;@InputRawFileSystem varchar(50) = null,&#xD;&#xA;    @InputRawFileFolder varchar(200) = null,&#xD;&#xA;    @InputRawFile varchar(200) = null,&#xD;&#xA;    @InputRawFileDelimiter char(1) = null,&#xD;&#xA;&#x9;@InputFileHeaderFlag bit = null,&#xD;&#xA;&#x9;&#xD;&#xA;&#x9;--Curated File &#xD;&#xA;&#x9;@OutputL1CurateFileSystem varchar(50) = null,&#xD;&#xA;    @OutputL1CuratedFolder varchar(200) = null,&#xD;&#xA;    @OutputL1CuratedFile varchar(200) = null,&#xD;&#xA;    @OutputL1CuratedFileDelimiter char(1) = null,&#xD;&#xA;    @OutputL1CuratedFileFormat varchar(10) = null,&#xD;&#xA;    @OutputL1CuratedFileWriteMode varchar(20) = null,&#xD;&#xA;    &#xD;&#xA;&#x9;--SQL&#xD;&#xA;&#x9;@OutputDWStagingTable varchar(200) = null,&#xD;&#xA;&#x9;@LookupColumns varchar(4000) = null,&#xD;&#xA;    @OutputDWTable varchar(200) = null,&#xD;&#xA;    @OutputDWTableWriteMode varchar(20) = null,&#xD;&#xA;    @IngestCount int = null,&#xD;&#xA;&#xD;&#xA;&#x9;--ADF Pipeline IDs&#xD;&#xA;&#x9;@IngestADFPipelineRunID  uniqueidentifier = null&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[InsertTransformInstance_L2]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

DECLARE @localdate as datetime	= CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')

	--Check if Transformation records already exists for the input file for same transformation e.g it's a reload
		IF NOT EXISTS 
			(
				SELECT 1 
				FROM 
					[ELT].[L2TransformInstance]
				WHERE 
					[IngestID] = @IngestID
					AND L2TransformID = @L2TransformID
					--Check does curated file record already exist
					AND OutputL2CurateFileSystem = @OutputL2CurateFileSystem
					AND OutputL2CuratedFolder = @OutputL2CuratedFolder
					AND OutputL2CuratedFile = @OutputL2CuratedFile

			)


	BEGIN
	--If this is a new transformation
		INSERT INTO [ELT].[L2TransformInstance]
			(
				 [L2TransformID]
				,[IngestID]
				,[L1TransformID]
				,[NotebookPath]
				,[NotebookName]
				,[CustomParameters]
				,[InputFileSystem]
				,[InputFileFolder]
				,[InputFile]
				,[InputFileDelimiter]
				,[InputFileHeaderFlag]
				,[InputDWTable]
				,[DeltaName]
				,[OutputL2CurateFileSystem]
				,[OutputL2CuratedFolder]
				,[OutputL2CuratedFile]
				,[OutputL2CuratedFileDelimiter]
				,[OutputL2CuratedFileFormat]
				,[OutputL2CuratedFileWriteMode]
				,[OutputDWStagingTable]
				,[LookupColumns]
				,[OutputDWTable]
				,[OutputDWTableWriteMode]
				,[RetryCount]
				,[ActiveFlag]
				,[IngestADFPipelineRunID]
				,[L1TransformADFPipelineRunID] --1555
				,[CreatedBy]
				,[CreatedTimestamp]

			   
			)
		VALUES
			(
				@L2TransformID,
				@IngestID,
				@L1TransformID,
				@NotebookPath,
				@NotebookName,
				@CustomParameters,
				@InputFileSystem,
				@InputFileFolder,
				@InputFile,
				@InputFileDelimiter,
				@InputFileHeaderFlag,
				@InputDWTable,
				@DeltaName,
				@OutputL2CurateFileSystem,
				@OutputL2CuratedFolder,
				@OutputL2CuratedFile,
				@OutputL2CuratedFileDelimiter,
				@OutputL2CuratedFileFormat,
				@OutputL2CuratedFileWriteMode,
				@OutputDWStagingTable,
				@LookupColumns,
				@OutputDWTable,
				@OutputDWTableWriteMode,
				0,
				1,
				@IngestADFPipelineRunID,
				@L1TransformADFPipelineRunID,	--1555
				SUSER_NAME(),
				@localdate
		)
		END
	ELSE
		--If this is an existing Transformation
		BEGIN
			--Just update one record in case if there are duplicates
			UPDATE TOP (1) [ELT].[L2TransformInstance]
		SET 
			[InputCount] = null
			,[L2TransformCount] = null
			,[L2TransformStartTimestamp] = null
			,[L2TransformEndTimestamp] = null
			,[L2TransformStatus] = null
			,[RetryCount] = 0
			,[ActiveFlag] = 1
			,[ReRunL2TransformFlag] = 1
			,[IngestADFPipelineRunID] = @IngestADFPipelineRunID
			,[L1TransformADFPipelineRunID] = null
			,[L2TransformADFPipelineRunID] = null
			,[ModifiedBy] = suser_sname()
			,[ModifiedTimestamp] = @localdate
		WHERE 
			[IngestID] = @IngestID
			AND L2TransformID = @L2TransformID
			--Check does curated file record already exist
			AND OutputL2CurateFileSystem = @OutputL2CurateFileSystem
			AND OutputL2CuratedFolder = @OutputL2CuratedFolder
			AND OutputL2CuratedFile = @OutputL2CuratedFile
			AND (ActiveFlag = 0 AND ISNULL(RetryCount,0)  >= @MaxRetries)
				
		END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@L2TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CurateFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@OutputL2CurateFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@OutputL2CuratedFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@OutputL2CuratedFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L1TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[NotebookPath]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[NotebookName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[CustomParameters]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[InputFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[InputFileFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[InputFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[InputFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[InputFileHeaderFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[InputDWTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[DeltaName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CurateFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFileFormat]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFileWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputDWStagingTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[LookupColumns]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputDWTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[OutputDWTableWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[RetryCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[IngestADFPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L1TransformADFPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[CreatedBy]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[CreatedTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@L1TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@NotebookPath]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@NotebookName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@CustomParameters]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@InputFileSystem]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@InputFileFolder]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@InputFile]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@InputFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@InputFileHeaderFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@InputDWTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@DeltaName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@OutputL2CuratedFileDelimiter]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@OutputL2CuratedFileFormat]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@OutputL2CuratedFileWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@OutputDWStagingTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@LookupColumns]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@OutputDWTable]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@OutputDWTableWriteMode]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@IngestADFPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@L1TransformADFPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[InputCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformStartTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformEndTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[ReRunL2TransformFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformADFPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[ModifiedBy]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[ModifiedTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[InsertTransformInstance_L2].[@MaxRetries]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@L2TransformID]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@IngestID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@L1TransformID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@NotebookName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@NotebookPath]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@CustomParameters]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@InputFileSystem]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@InputFileFolder]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@InputFile]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@InputFileDelimiter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@InputFileHeaderFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@InputDWTable]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@DeltaName]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@DataFromTimestamp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@DataToTimestamp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@DataFromNumber]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@DataToNumber]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@LastDeltaDate]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@LastDeltaNumber]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@OutputL2CurateFileSystem]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@OutputL2CuratedFolder]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@OutputL2CuratedFile]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@OutputL2CuratedFileDelimiter]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@OutputL2CuratedFileFormat]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@OutputL2CuratedFileWriteMode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@OutputDWStagingTable]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@LookupColumns]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="4000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@OutputDWTable]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@OutputDWTableWriteMode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@IngestADFPipelineRunID]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@L1TransformADFPipelineRunID]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[InsertTransformInstance_L2].[@MaxRetries]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="4678" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[InsertTransformInstance_L2]&#xD;&#xA;&#x9;--PK/FK&#xD;&#xA;&#x9;@L2TransformID int = null,&#xD;&#xA;&#x9;@IngestID int,&#xD;&#xA;&#x9;@L1TransformID int,&#xD;&#xA;&#xD;&#xA;&#x9;--Databricks Notebook&#xD;&#xA;&#x9;@NotebookName varchar(100) = null,&#xD;&#xA;&#x9;@NotebookPath varchar(200) = null,&#xD;&#xA;&#xD;&#xA;&#x9;--Custom&#xD;&#xA;&#x9;@CustomParameters varchar(max) = null,&#xD;&#xA;&#xD;&#xA;&#x9;--Input File&#xD;&#xA;&#x9;@InputFileSystem varchar(50) = null,&#xD;&#xA;    @InputFileFolder varchar(200) = null,&#xD;&#xA;    @InputFile varchar(200) = null,&#xD;&#xA;    @InputFileDelimiter char(1) = null,&#xD;&#xA;&#x9;@InputFileHeaderFlag bit = null,&#xD;&#xA;&#x9;@InputDWTable varchar(200) = null,&#xD;&#xA;&#xD;&#xA;&#x9;--Delta&#xD;&#xA;&#x9;@DeltaName varchar(50) = null,&#xD;&#xA;&#x9;@DataFromTimestamp Datetime2 =null,&#xD;&#xA;&#x9;@DataToTimestamp Datetime2 =null,&#xD;&#xA;&#x9;@DataFromNumber int =null,&#xD;&#xA;&#x9;@DataToNumber int =null,&#xD;&#xA;&#x9;@LastDeltaDate datetime = null,&#xD;&#xA;&#x9;@LastDeltaNumber int = null,&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#x9;--Curated File &#xD;&#xA;&#x9;@OutputL2CurateFileSystem varchar(50),&#xD;&#xA;    @OutputL2CuratedFolder varchar(200),&#xD;&#xA;    @OutputL2CuratedFile varchar(200),&#xD;&#xA;    @OutputL2CuratedFileDelimiter char(1) = null,&#xD;&#xA;    @OutputL2CuratedFileFormat varchar(10) = null,&#xD;&#xA;    @OutputL2CuratedFileWriteMode varchar(20) = null,&#xD;&#xA;&#xD;&#xA;&#x9;--SQL&#xD;&#xA;&#x9;@OutputDWStagingTable varchar(200) = null,&#xD;&#xA;&#x9;@LookupColumns varchar(4000) = null,&#x9;&#xD;&#xA;    @OutputDWTable varchar(200) = null,&#xD;&#xA;    @OutputDWTableWriteMode varchar(20) = null,&#xD;&#xA;&#x9;&#xD;&#xA;&#xD;&#xA;&#x9;--ADF Pipeline IDs&#xD;&#xA;&#x9;@IngestADFPipelineRunID uniqueidentifier = null,&#xD;&#xA;&#x9;@L1TransformADFPipelineRunID  uniqueidentifier = null,&#xD;&#xA;&#xD;&#xA;&#x9;--Max Retries&#xD;&#xA;&#x9;@MaxRetries int = null&#xD;&#xA;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[ELT].[L1TransformDefinition]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[L1TransformID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[IngestID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[NotebookPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[NotebookName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[CustomParameters]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[InputRawFileSystem]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[InputRawFileFolder]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[InputRawFile]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[InputRawFileDelimiter]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[InputFileHeaderFlag]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[OutputL1CurateFileSystem]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[OutputL1CuratedFolder]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[OutputL1CuratedFile]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[OutputL1CuratedFileDelimiter]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[OutputL1CuratedFileFormat]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[OutputL1CuratedFileWriteMode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[OutputDWStagingTable]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[LookupColumns]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="4000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[OutputDWTable]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[OutputDWTableWriteMode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[MaxRetries]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[DeltaName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[ActiveFlag]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[CreatedTimestamp]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[ModifiedBy]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformDefinition].[ModifiedTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[ELT].[L1TransformDefinition].[UI_L1TransformDefinition]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L1TransformDefinition].[InputRawFileSystem]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L1TransformDefinition].[InputRawFileFolder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L1TransformDefinition].[InputRawFile]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L1TransformDefinition].[OutputL1CurateFileSystem]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L1TransformDefinition].[OutputL1CuratedFolder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L1TransformDefinition].[OutputL1CuratedFile]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[ELT].[L1TransformInstance]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[L1TransformInstanceID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[L1TransformID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[IngestInstanceID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[IngestID]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[NotebookName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[NotebookPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[CustomParameters]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[InputRawFileSystem]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[InputRawFileFolder]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[InputRawFile]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[InputRawFileDelimiter]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[InputFileHeaderFlag]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[OutputL1CurateFileSystem]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[OutputL1CuratedFolder]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[OutputL1CuratedFile]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[OutputL1CuratedFileDelimiter]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[OutputL1CuratedFileFormat]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[OutputL1CuratedFileWriteMode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[OutputDWStagingTable]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[LookupColumns]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="4000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[OutputDWTable]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[OutputDWTableWriteMode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[IngestCount]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[L1TransformCount]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[L1TransformStartTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[L1TransformEndTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[L1TransformStatus]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[RetryCount]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[ActiveFlag]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[ReRunL1TransformFlag]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[IngestADFPipelineRunID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[L1TransformADFPipelineRunID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[CreatedTimestamp]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[ModifiedBy]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L1TransformInstance].[ModifiedTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[ELT].[L1TransformInstance].[UI_L1TransformInstance]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L1TransformInstance].[InputRawFileSystem]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L1TransformInstance].[InputRawFileFolder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L1TransformInstance].[InputRawFile]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L1TransformInstance].[OutputL1CurateFileSystem]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L1TransformInstance].[OutputL1CuratedFolder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L1TransformInstance].[OutputL1CuratedFile]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[ELT].[L1TransformInstance]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[ELT].[L2TransformDefinition]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[L2TransformID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[IngestID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[L1TransformID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[NotebookPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[NotebookName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[CustomParameters]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[InputType]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="15" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[InputFileSystem]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[InputFileFolder]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[InputFile]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[InputFileDelimiter]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[InputFileHeaderFlag]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[InputDWTable]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[DeltaName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[LastDeltaDate]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[LastDeltaNumber]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[MaxIntervalMinutes]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[MaxIntervalNumber]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[MaxRetries]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[OutputL2CurateFileSystem]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[OutputL2CuratedFolder]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[OutputL2CuratedFile]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[OutputL2CuratedFileDelimiter]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[OutputL2CuratedFileFormat]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[OutputL2CuratedFileWriteMode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[OutputDWStagingTable]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[LookupColumns]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="4000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[OutputDWTable]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[OutputDWTableWriteMode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[ActiveFlag]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[RunSequence]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[CreatedTimestamp]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[ModifiedBy]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformDefinition].[ModifiedTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[ELT].[L2TransformDefinition].[UI_L2TransformDefinition]">
			<Property Name="IsUnique" Value="True" />
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformDefinition].[InputFileSystem]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformDefinition].[InputFileFolder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformDefinition].[InputFile]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformDefinition].[InputDWTable]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformDefinition].[OutputL2CurateFileSystem]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformDefinition].[OutputL2CuratedFolder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformDefinition].[OutputL2CuratedFile]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[ELT].[L2TransformInstance]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[L2TransformInstanceID]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[L2TransformID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[IngestID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[L1TransformID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[NotebookPath]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[NotebookName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[CustomParameters]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[InputFileSystem]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[InputFileFolder]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[InputFile]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[InputFileDelimiter]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[InputFileHeaderFlag]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[InputDWTable]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[DeltaName]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[DataFromTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[DataToTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[DataFromNumber]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[DataToNumber]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[OutputL2CurateFileSystem]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[OutputL2CuratedFolder]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[OutputL2CuratedFile]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[OutputL2CuratedFileDelimiter]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[char]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[OutputL2CuratedFileFormat]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="10" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[OutputL2CuratedFileWriteMode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[OutputDWStagingTable]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[LookupColumns]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="4000" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[OutputDWTable]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="200" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[OutputDWTableWriteMode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[InputCount]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[L2TransformCount]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[L2TransformStartTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[L2TransformEndTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[L2TransformStatus]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[RetryCount]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[ActiveFlag]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[ReRunL2TransformFlag]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[IngestADFPipelineRunID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[L1TransformADFPipelineRunID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[L2TransformADFPipelineRunID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[CreatedBy]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[CreatedTimestamp]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[ModifiedBy]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="128" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[ModifiedTimestamp]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[L2SnapshotGroupID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[ELT].[L2TransformInstance].[L2SnapshotInstanceID]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlIndex" Name="[ELT].[L2TransformInstance].[UI_L2TransformInstance]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformInstance].[InputFileSystem]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformInstance].[InputFileFolder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformInstance].[InputFile]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformInstance].[InputDWTable]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformInstance].[OutputL2CurateFileSystem]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFolder]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformInstance].[OutputL2CuratedFile]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="IndexedObject">
				<Entry>
					<References Name="[ELT].[L2TransformInstance]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[ELT].[PK_Attribute]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[ColumnMapping].[MappingID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[ColumnMapping]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[ELT].[PK_IngestDefinition]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[IngestDefinition].[IngestID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[ELT].[PK_IngestInstance]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[IngestInstance].[IngestInstanceID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[IngestInstance]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[ELT].[PK_L1TransformDefinition]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L1TransformDefinition].[L1TransformID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[ELT].[PK_L1TransformInstance]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L1TransformInstance].[L1TransformInstanceID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L1TransformInstance]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[ELT].[PK_L2TransformDefinition]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformDefinition].[L2TransformID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[ELT].[PK_L2TransformInstance]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[ELT].[L2TransformInstance].[L2TransformInstanceID]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[ELT].[L2TransformInstance]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[ELT].[uf_GetAestDateTime]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
 BEGIN
    RETURN CONVERT(datetime,CONVERT(datetimeoffset, getdate()) AT TIME ZONE 'AUS Eastern Standard Time')
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="207" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION ELT.[uf_GetAestDateTime]()&#xD;&#xA;RETURNS DATETIME&#xD;&#xA;WITH EXECUTE AS CALLER&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[datetime]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[ELT].[uf_GetColumnMapping]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[SourceName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[TargetName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetColumnMapping].[@IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[L1TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetColumnMapping].[@L1TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[L2TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetColumnMapping].[@L2TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[ActiveFlag]" />
				</Entry>
			</Relationship>
			<Relationship Name="DynamicObjects">
				<Entry>
					<Element Type="SqlDynamicColumnSource" Name="[ELT].[uf_GetColumnMapping].[CTE1].[cte]">
						<Relationship Name="Columns">
							<Entry>
								<Element Type="SqlComputedColumn" Name="[ELT].[uf_GetColumnMapping].[CTE1].[cte].[Mapping]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[ BEGIN
	DECLARE @mapping NVARCHAR(MAX)
		BEGIN
			WITH 
				cte
			AS
			(
				select 	
					Mapping = CASE 
								WHEN SourceName IS NULL THEN NULL
								ELSE '{"source":{"name":"' + SourceName + '"},"sink":{"name":"' + TargetName + '"}},'
							END
				from
					[ELT].[ColumnMapping]
				WHERE
					IngestID = @IngestID
					or L1TransformID =  @L1TransformID
					or L2TransformID =  @L2TransformID
					and ActiveFlag = 1
			)
			
			SELECT 
				@mapping = CASE 
							WHEN STRING_AGG (Mapping, '') IS NULL THEN NULL
							ELSE COALESCE(concat('{"type":"TabularTranslator","mappings":[', SUBSTRING(STRING_AGG (Mapping, ''),1,LEN(STRING_AGG (Mapping, ''))-1),  ']}'), NULL)
						END
			FROM cte;
		END
				
 -- Return the result of the function
	Return @mapping

END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="961" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [ELT].[uf_GetColumnMapping]&#xD;&#xA;(&#xD;&#xA;&#x9;@IngestID int NULL,&#xD;&#xA;&#x9;@L1TransformID int NULL,&#xD;&#xA;&#x9;@L2TransformID int NULL&#xD;&#xA;&#x9;)&#xD;&#xA;RETURNS varchar(max)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[uf_GetColumnMapping].[@IngestID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[uf_GetColumnMapping].[@L1TransformID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[uf_GetColumnMapping].[@L2TransformID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[varchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[ELT].[uf_GetIngestionColumnList]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[SourceName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[TargetName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetIngestionColumnList].[@IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[TargetOrdinalPosition]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[SourceName]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[ BEGIN
	DECLARE @Columns NVARCHAR(MAX)

	--Columns
	SET @Columns = (
					SELECT
						DISTINCT 
						stuff((
							SELECT ', ' + SourceName + ' as ' + TargetName
						      FROM     
								[ELT].[ColumnMapping]
							WHERE IngestID = @IngestID
							and ActiveFlag = 1
							ORDER BY TargetOrdinalPosition ASC
						       FOR XML PATH('')
						       ),1,1,'') as Columns
						FROM [ELT].[ColumnMapping]
						WHERE IngestID = @IngestID
						and ActiveFlag = 1
						GROUP BY SourceName
					)
	SET @Columns = COALESCE(@Columns, ' * ')
				
 -- Return the columns of the function
	RETURN @Columns
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="738" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [ELT].[uf_GetIngestionColumnList]&#xD;&#xA;(&#xD;&#xA;&#x9;@IngestID INT&#xD;&#xA;)&#xD;&#xA;&#x9;&#xD;&#xA;RETURNS varchar(max)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[uf_GetIngestionColumnList].[@IngestID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[varchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[ELT].[uf_GetSalesforceQuery]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[nvarchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime2]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetSalesforceQuery].[@FromDate]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetSalesforceQuery].[@ToDate]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetSalesforceQuery].[@MaxIntervalMinutes]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[SourceName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetSalesforceQuery].[@IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[TargetOrdinalPosition]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[ColumnMapping].[SourceName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetSalesforceQuery].[@QueryType]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetSalesforceQuery].[@EntityName]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetSalesforceQuery].[@DeltaName]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	Declare @Query varchar(MAX)
	DECLARE @MappingExists INT
	DECLARE @Columns NVARCHAR(MAX)
	Declare @From datetime2
	DECLARE @FromStr varchar(27), @ToStr varchar(27)

	SET @From = (CASE 
					WHEN @FromDate is NULL THEN '1900-01-01 00:00:00'
					ELSE @FromDate
				END)

	--Datetime Strings
	SET @ToStr = FORMAT(CAST((
								CASE 
									WHEN @ToDate IS NOT NULL 
										THEN @ToDate
								WHEN @ToDate is NULL AND @MaxIntervalMinutes IS NULL 
									THEN GETDATE()
								WHEN @ToDate is NULL AND @MaxIntervalMinutes IS NOT NULL AND DATEADD(DAY,@MaxIntervalMinutes/1440,@From) > GETDATE() 
									THEN GETDATE()
								WHEN @ToDate is NULL AND @MaxIntervalMinutes IS NOT NULL AND DATEADD(DAY,@MaxIntervalMinutes/1440,@From) <= GETDATE() 
									THEN DATEADD(DAY,@MaxIntervalMinutes/1440,@From)
								ELSE GETDATE()
								END
							) 
								as datetime), 'yyyy-MM-ddTHH:mm:ssZ')

	SET @FromStr = (CASE 
					WHEN @FromDate is NULL THEN '1900-01-01T00:00:00Z'
					ELSE FORMAT(CAST(@FromDate as datetime), 'yyyy-MM-ddTHH:mm:ssZ')
				END)

	--Set Columns
	SET @Columns = (		
						SELECT
							DISTINCT
								STUFF((
									SELECT 
										', ' + SourceName
								    FROM     
										[ELT].[ColumnMapping]
									WHERE IngestID = @IngestID
										AND ActiveFlag = 1
									ORDER BY TargetOrdinalPosition ASC
								       FOR XML PATH('')
								       ),1,1,'') AS ColumnList
						FROM
							[ELT].[ColumnMapping]
						WHERE IngestID = @IngestID
							and ActiveFlag = 1 
						GROUP BY SourceName
					)

	--SourceQuery
	IF @QueryType ='SourceQuery'
		BEGIN
			SET @Query = 
						'SELECT ' + COALESCE(@Columns, ' * ')
						+ ' FROM ' + @EntityName 
						+ CASE 
							WHEN @DeltaName IS NOT NULL
								THEN ' WHERE ' 	+ @DeltaName + ' > ' + @FromStr + ' AND ' + @DeltaName + ' <= ' + @ToStr
							ELSE ''
						END
		END

	--StatQuery
	IF @QueryType ='StatQuery'
		BEGIN
			SET @Query = CASE 
							WHEN @DeltaName IS NOT NULL 
								THEN 'SELECT MIN('+@DeltaName+') AS DataFromTimestamp,' + ' MAX('+@DeltaName+') AS DataToTimestamp,'+ 'COUNT(*) AS SourceCount' 
							WHEN @DeltaName IS NULL
								THEN 'SELECT ''1900-01-01T00:00:00Z'' AS DataFromTimestamp, '''+FORMAT(CAST(GETDATE() as datetime), 'yyyy-MM-ddTHH:mm:ssZ')+''' AS DataToTimestamp,  COUNT(*) AS SourceCount '
							END
							+ ' FROM ' + @EntityName 
							+ CASE 
								WHEN @DeltaName IS NOT NULL
									THEN ' WHERE ' + @DeltaName + ' > ' + '''' + FORMAT(CAST(@FromStr as datetime), 'yyyy-MM-dd HH:mm:ss') + '''' +  ' AND ' + @DeltaName + ' <= ' + '''' + FORMAT(CAST(@ToStr as datetime), 'yyyy-MM-dd HH:mm:ss') + ''''
								ELSE ''
							END
						END
				
 -- Return the result of the function
	Return @Query

END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="3135" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [ELT].[uf_GetSalesforceQuery]&#xD;&#xA;(&#xD;&#xA;&#x9;@QueryType varchar(20), --SourceQuery|StatQuery&#xD;&#xA;&#x9;@IngestID INT,&#xD;&#xA;&#x9;@EntityName varchar(100),&#xD;&#xA;&#x9;@DeltaName varchar(20),&#xD;&#xA;&#x9;@FromDate datetime2=NULL,&#xD;&#xA;&#x9;@ToDate datetime2=NULL,&#xD;&#xA;&#x9;@MaxIntervalMinutes int=NULL&#xD;&#xA;&#x9;)&#xD;&#xA;RETURNS varchar(MAX)&#xD;&#xA;&#x9;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[uf_GetSalesforceQuery].[@QueryType]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[uf_GetSalesforceQuery].[@IngestID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[uf_GetSalesforceQuery].[@EntityName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="100" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[uf_GetSalesforceQuery].[@DeltaName]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[uf_GetSalesforceQuery].[@FromDate]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[uf_GetSalesforceQuery].[@ToDate]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[uf_GetSalesforceQuery].[@MaxIntervalMinutes]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[varchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlScalarFunction" Name="[ELT].[uf_GetTabularTranslatorMappingJson]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetTabularTranslatorMappingJson].[@DataMappingJson]" />
				</Entry>
			</Relationship>
			<Relationship Name="FunctionBody">
				<Entry>
					<Element Type="SqlScriptFunctionImplementation">
						<Property Name="BodyScript">
							<Value><![CDATA[
BEGIN
	-- Uses standard ADF Explicit Schema Mapping
	-- https://docs.microsoft.com/en-us/azure/data-factory/copy-activity-schema-and-type-mapping
	DECLARE @TabularTranslatorJson VARCHAR(MAX) = '{
		"type": "TabularTranslator",
		"mappings": <MAPPINGS>
	}'
	RETURN REPLACE(@TabularTranslatorJson, '<MAPPINGS>', @DataMappingJson)
END]]></Value>
						</Property>
						<Annotation Type="SysCommentsObjectAnnotation">
							<Property Name="Length" Value="463" />
							<Property Name="StartLine" Value="1" />
							<Property Name="StartColumn" Value="1" />
							<Property Name="HeaderContents" Value="CREATE FUNCTION [ELT].[uf_GetTabularTranslatorMappingJson]&#xD;&#xA;(&#xD;&#xA;&#x9;@DataMappingJson VARCHAR(MAX)&#xD;&#xA;)&#xD;&#xA;RETURNS VARCHAR(MAX)&#xD;&#xA;AS" />
						</Annotation>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[uf_GetTabularTranslatorMappingJson].[@DataMappingJson]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Relationship Name="Type">
				<Entry>
					<Element Type="SqlTypeSpecifier">
						<Property Name="IsMax" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<References ExternalSource="BuiltIns" Name="[varchar]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[UpdateIngestDefinition]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

		DECLARE @localdate as datetime	= CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')

		Update 
			[ELT].[IngestDefinition]
		SET 
			[LastDeltaDate] =
							CASE
								--When Successful and the DataToDate does not move forward since LastDeltaDate, Increase LastDeltaDate by the Interval
								WHEN @LastDeltaDate IS NOT NULL AND @ReloadFlag <> 1 AND @IngestStatus IN ('Success','ReRunSuccess') AND @LastDeltaDate = [LastDeltaDate] 
									and [MaxIntervalMinutes] is NOT NULL
									THEN 
										CASE 
											WHEN 
												DateAdd(minute,[MaxIntervalMinutes],@LastDeltaDate) > ELT.[uf_GetAestDateTime]()
													THEN CONVERT(VARCHAR(30),ELT.[uf_GetAestDateTime](),120)
											ELSE
												DateAdd(minute,[MaxIntervalMinutes],[LastDeltaDate])
										END
								--Re-run delta date is later than existing delta date
								WHEN @LastDeltaDate IS NOT NULL AND @IngestStatus IN ('Success','ReRunSuccess') AND datediff_big(ss,[LastDeltaDate],@LastDeltaDate) >= 0 
									THEN @LastDeltaDate
								--Re-run delta date is earlier than existing delta date
								WHEN @LastDeltaDate IS NOT NULL AND @IngestStatus IN ('Success','ReRunSuccess')  AND datediff_big(ss,@LastDeltaDate,[LastDeltaDate]) >=0 
									THEN [LastDeltaDate]
								ELSE [LastDeltaDate]
							END
			, [LastDeltaNumber] = 
							CASE
								WHEN @LastDeltaNumer IS NOT NULL AND @IngestStatus IN ('Success','ReRunSuccess') 
									THEN @LastDeltaNumer
								WHEN @LastDeltaNumer IS NOT NULL AND @IngestStatus IN ('Failure','ReRunFailure') 
									THEN [LastDeltaNumber]
								WHEN @LastDeltaNumer IS NULL AND @ReloadFlag <> 1 AND @IngestStatus IN ('Success','ReRunSuccess')  
									THEN ([LastDeltaNumber] + [MaxIntervalNumber])
								ELSE [LastDeltaNumber]
							END
			,[ModifiedBy] =suser_sname()
			, [ModifiedTimestamp]=@localdate
	WHERE [IngestID]=@IngestID
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[LastDeltaDate]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateIngestDefinition].[@LastDeltaDate]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateIngestDefinition].[@ReloadFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateIngestDefinition].[@IngestStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[MaxIntervalMinutes]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetAestDateTime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[varchar]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[LastDeltaNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateIngestDefinition].[@LastDeltaNumer]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[MaxIntervalNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[ModifiedBy]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[ModifiedTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestDefinition].[IngestID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateIngestDefinition].[@IngestID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateIngestDefinition].[@IngestID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateIngestDefinition].[@LastDeltaDate]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateIngestDefinition].[@LastDeltaNumer]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateIngestDefinition].[@IngestStatus]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateIngestDefinition].[@ReloadFlag]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[0]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2164" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[UpdateIngestDefinition]&#xD;&#xA;&#x9;@IngestID INT,&#xD;&#xA;&#x9;@LastDeltaDate Datetime2=null,&#xD;&#xA;&#x9;@LastDeltaNumer int=null,&#xD;&#xA;&#x9;@IngestStatus varchar(20),&#xD;&#xA;&#x9;@ReloadFlag bit=0&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[UpdateIngestInstance]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

		DECLARE @localdate as datetime	= CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')

	Update 
		[ELT].[IngestInstance]
	SET 
		[DataFromTimestamp] = @DataFromTimestamp
		,[DataToTimestamp]=@DataToTimestamp
		,[DataFromNumber] = @DataFromNumber
		,[DataToNumber]=@DataToNumber
		,[SourceCount] =@SourceCount
		,[IngestCount]=@IngestCount
		,[IngestEndTimestamp] =@localdate
		,[IngestStatus] =(CASE WHEN @ReloadFlag=1 AND @IngestStatus='Success' THEN 'ReRunSuccess'
							WHEN   @ReloadFlag=1 AND @IngestStatus='Failure' THEN 'ReRunFailure'
							ELSE @IngestStatus
						END)
		,[RetryCount] = (CASE WHEN @IngestStatus  IN ('Success','ReRunSuccess') THEN 0
							WHEN @IngestStatus IN ('Failure','ReRunFailure')  THEN ISNULL([RetryCount],0) +1
						END)
		,[ReloadFlag] =(CASE WHEN @ReloadFlag=1 AND @IngestStatus IN ('Success','ReRunSuccess') THEN 0
							WHEN @ReloadFlag=1 AND @IngestStatus IN ('Failure','ReRunFailure') THEN 1
							ELSE 0
						 END)
		,[ModifiedBy]=suser_sname()
		,[ModifiedTimestamp] = @localdate
	WHERE
		ADFIngestPipelineRunID =@ADFIngestPipelineRunID
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DataFromTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateIngestInstance].[@DataFromTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DataToTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateIngestInstance].[@DataToTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DataFromNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateIngestInstance].[@DataFromNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[DataToNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateIngestInstance].[@DataToNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[SourceCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateIngestInstance].[@SourceCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[IngestCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateIngestInstance].[@IngestCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[IngestEndTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[IngestStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateIngestInstance].[@ReloadFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateIngestInstance].[@IngestStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[RetryCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[ReloadFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[ModifiedBy]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[ModifiedTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[IngestInstance].[ADFIngestPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateIngestInstance].[@ADFIngestPipelineRunID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateIngestInstance].[@ADFIngestPipelineRunID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateIngestInstance].[@IngestStatus]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateIngestInstance].[@DataFromTimestamp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateIngestInstance].[@DataToTimestamp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateIngestInstance].[@DataFromNumber]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateIngestInstance].[@DataToNumber]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateIngestInstance].[@SourceCount]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateIngestInstance].[@IngestCount]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateIngestInstance].[@ReloadFlag]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1497" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[UpdateIngestInstance]&#xD;&#xA;&#x9;@ADFIngestPipelineRunID Uniqueidentifier,&#xD;&#xA;&#x9;@IngestStatus varchar(20) =null,&#xD;&#xA;&#x9;@DataFromTimestamp Datetime2 =null,&#xD;&#xA;&#x9;@DataToTimestamp Datetime2 =null,&#xD;&#xA;&#x9;@DataFromNumber int =null,&#xD;&#xA;&#x9;@DataToNumber int =null,&#xD;&#xA;&#x9;@SourceCount int=null,&#xD;&#xA;&#x9;@IngestCount int=null,&#xD;&#xA;&#x9;@ReloadFlag bit&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[UpdateTransformDefinition_L2]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	Update [ELT].[L2TransformDefinition]
	SET 
		[ModifiedBy] =suser_sname(),
		[ModifiedTimestamp]=GETDATE(),
		[LastDeltaDate] = COALESCE(@LastDeltaDate,[LastDeltaDate],ELT.uf_GetAestDateTime()),
		[LastDeltaNumber] = COALESCE(@LastDeltaNumber,[LastDeltaNumber])

	WHERE [L2TransformID] = @L2TransformID
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[ELT].[L2TransformDefinition]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[ModifiedBy]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[ModifiedTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[LastDeltaDate]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformDefinition_L2].[@LastDeltaDate]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[uf_GetAestDateTime]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[LastDeltaNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformDefinition_L2].[@LastDeltaNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformDefinition].[L2TransformID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformDefinition_L2].[@L2TransformID]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformDefinition_L2].[@L2TransformID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformDefinition_L2].[@LastDeltaDate]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformDefinition_L2].[@LastDeltaNumber]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="466" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[UpdateTransformDefinition_L2]&#xD;&#xA;&#x9;@L2TransformID INT,&#xD;&#xA;&#x9;@LastDeltaDate Datetime2 =null,&#xD;&#xA;&#x9;@LastDeltaNumber int =null&#xD;&#xA;&#x9;as" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[UpdateTransformInstance_L1]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	
	DECLARE @localdate datetime	= CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')

		Update 
			[ELT].[L1TransformInstance]
		SET 
			[L1TransformStartTimestamp] = CASE 
											WHEN @L1TransformStatus IN ('Running') 
												THEN @localdate 
											ELSE [L1TransformStartTimestamp] 
										END

			, [L1TransformEndTimestamp] = CASE
												WHEN @L1TransformStatus IN ('Success','Failure','ReRunSuccess','ReRunFailure') 
													THEN @localdate 
												ELSE NULL 
											END
										
			, [L1TransformStatus] = CASE 
										WHEN ([ReRunL1TransformFlag] = 1 OR [RetryCount] >0) AND @L1TransformStatus='Success' 
											THEN 'ReRunSuccess'
										WHEN [ReRunL1TransformFlag] = 1 AND @L1TransformStatus='Failure' 
											THEN 'ReRunFailure'
									ELSE @L1TransformStatus 
								 END
			, [ActiveFlag] = CASE
								WHEN @L1TransformStatus IN ('Success','ReRunSuccess') 
									THEN 0
								WHEN @L1TransformStatus = 'Failure' and ISNULL(RetryCount,0) +1 >= @MaxRetries
									THEN 0
								ELSE 1 
							END
			, [ReRunL1TransformFlag] =	CASE 
											WHEN [ReRunL1TransformFlag] = 1 AND @L1TransformStatus IN ('Success','ReRunSuccess') 
												THEN 0
											WHEN @L1TransformStatus in ('Failure', 'ReRunFailure') and ISNULL(RetryCount,0) +1 >= @MaxRetries
													THEN 0
											ELSE [ReRunL1TransformFlag] 
										END
			, [RetryCount] = CASE
								WHEN
									@L1TransformStatus in ('Success', 'ReRunSuccess')
										THEN 0
								WHEN	
									@L1TransformStatus in ('Failure', 'ReRunFailure')
										THEN ISNULL([RetryCount],0) + 1
								Else [RetryCount]
								END
							
			, [ModifiedBy] =suser_sname()
			, [ModifiedTimestamp]=@localdate
			, [L1TransformADFPipelineRunID] = @L1TransformADFPipelineRunID
			, [IngestCount] = ISNULL(@IngestCount,[IngestCount])
			, [L1TransformCount] = ISNULL(@L1TransformCount,[L1TransformCount])
	WHERE 
		[L1TransformInstanceID] = @L1TransformInstanceId
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformStartTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L1].[@L1TransformStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformEndTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[ReRunL1TransformFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[RetryCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L1].[@MaxRetries]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[ModifiedBy]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[ModifiedTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformADFPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L1].[@L1TransformADFPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[IngestCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L1].[@IngestCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L1].[@L1TransformCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L1TransformInstance].[L1TransformInstanceID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L1].[@L1TransformInstanceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L1].[@L1TransformInstanceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L1].[@L1TransformStatus]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L1].[@L1TransformADFPipelineRunID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L1].[@IngestCount]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L1].[@L1TransformCount]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L1].[@MaxRetries]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2379" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[UpdateTransformInstance_L1]&#xD;&#xA;&#x9;@L1TransformInstanceId INT&#xD;&#xA;   , @L1TransformStatus VARCHAR(20)&#xD;&#xA;   , @L1TransformADFPipelineRunID UNIQUEIDENTIFIER&#xD;&#xA;   , @IngestCount INT = NULL&#xD;&#xA;   , @L1TransformCount INT = NULL&#xD;&#xA;   , @MaxRetries int = null&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[ELT].[UpdateTransformInstance_L2]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN

	DECLARE @localdate datetime	= CONVERT(datetime,CONVERT(datetimeoffset, getdate()) at time zone 'AUS Eastern Standard Time')

		Update 
			[ELT].[L2TransformInstance]
		SET 
			[L2TransformStartTimestamp] = CASE 
											WHEN @L2TransformStatus IN ('Running') 
												THEN @localdate 
											ELSE [L2TransformStartTimestamp] 
										END

			, [L2TransformEndTimestamp] = CASE 
												WHEN @L2TransformStatus IN ('Success','Failure','ReRunSuccess','ReRunFailure') 
													THEN @localdate 
												ELSE NULL 
											END
			, [DataFromTimestamp] = @DataFromTimestamp
			, [DataToTimestamp] = @DataToTimestamp	
			, [DataFromNumber] = @DataFromNumber
			, [DataToNumber] = @DataToNumber
			, [L2TransformStatus] = CASE 
										WHEN ([ReRunL2TransformFlag] = 1 OR [RetryCount] > 0) AND @L2TransformStatus = 'Success' 
											THEN 'ReRunSuccess'
										WHEN [ReRunL2TransformFlag] = 1 AND @L2TransformStatus = 'Failure' 
											THEN 'ReRunFailure'
									ELSE @L2TransformStatus 
								 END
			, [ActiveFlag] = CASE 
								WHEN @L2TransformStatus IN ('Success','ReRunSuccess') 
									THEN 0
								WHEN @L2TransformStatus = 'Failure' and ISNULL(RetryCount,0) +1 >= @MaxRetries
									THEN 0
								ELSE 1 
							END
			, [ReRunL2TransformFlag] = CASE 
											WHEN [ReRunL2TransformFlag] =1 AND @L2TransformStatus IN ('Success','ReRunSuccess') 
												THEN 0
											WHEN @L2TransformStatus in ('Failure', 'ReRunFailure') and ISNULL(RetryCount,0) +1 >= @MaxRetries
													THEN 0
											ELSE [ReRunL2TransformFlag] 
										END
			, [RetryCount] = CASE
								WHEN
									@L2TransformStatus in ('Success', 'ReRunSuccess')
										THEN 0
								WHEN	
									@L2TransformStatus in ('Failure', 'ReRunFailure')
										THEN ISNULL([RetryCount],0) + 1
								ELSE [RetryCount]
								END
							
			, [ModifiedBy] =suser_sname()
			, [ModifiedTimestamp]=@localdate
			, [L2TransformADFPipelineRunID] = @L2TransformADFPipelineRunID
			, [InputCount] = ISNULL(@InputCount,[InputCount])
			, [L2TransformCount] = ISNULL(@L2TransformCount,[L2TransformCount])
		WHERE 
			[L2TransformInstanceID] = @L2TransformInstanceId
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetime]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[datetimeoffset]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformStartTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L2].[@L2TransformStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformEndTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[DataFromTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L2].[@DataFromTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[DataToTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L2].[@DataToTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[DataFromNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L2].[@DataFromNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[DataToNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L2].[@DataToNumber]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformStatus]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[ReRunL2TransformFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[RetryCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[ActiveFlag]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L2].[@MaxRetries]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[ModifiedBy]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[ModifiedTimestamp]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformADFPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L2].[@L2TransformADFPipelineRunID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[InputCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L2].[@InputCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L2].[@L2TransformCount]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[L2TransformInstance].[L2TransformInstanceID]" />
				</Entry>
				<Entry>
					<References Name="[ELT].[UpdateTransformInstance_L2].[@L2TransformInstanceId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L2].[@L2TransformInstanceId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L2].[@L2TransformStatus]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="20" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[varchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L2].[@L2TransformADFPipelineRunID]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[uniqueidentifier]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L2].[@InputCount]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L2].[@L2TransformCount]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[NULL]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L2].[@DataFromTimestamp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L2].[@DataToTimestamp]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Scale" Value="7" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime2]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L2].[@DataFromNumber]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L2].[@DataToNumber]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[ELT].[UpdateTransformInstance_L2].[@MaxRetries]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[ELT]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="2676" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [ELT].[UpdateTransformInstance_L2]&#xD;&#xA;&#x9;@L2TransformInstanceId INT&#xD;&#xA;   ,@L2TransformStatus VARCHAR(20)&#xD;&#xA;   ,@L2TransformADFPipelineRunID UNIQUEIDENTIFIER&#xD;&#xA;   ,@InputCount INT = NULL&#xD;&#xA;   ,@L2TransformCount INT = NULL&#xD;&#xA;   ,@DataFromTimestamp Datetime2 = null&#xD;&#xA;   ,@DataToTimestamp Datetime2 = null&#xD;&#xA;   ,@DataFromNumber int = null&#xD;&#xA;   ,@DataToNumber int = null&#xD;&#xA;   ,@MaxRetries int = null&#xD;&#xA;AS" />
			</Annotation>
		</Element>
	</Model>
</DataSchemaModel>